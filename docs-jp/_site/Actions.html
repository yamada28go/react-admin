<!DOCTYPE html>
<html lang="en-US">
    <head>
        <title>React-admin - APIのクエリ実行</title>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
        <meta name="description" content="" />
        <meta name="HandheldFriendly" content="true" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <link
            rel="canonical"
            href="/Actions.html"
        />
        <link
            rel="stylesheet"
            href="/css/materialize.min.css"
        />
        <link
            rel="stylesheet"
            href="/css/style-v19.css"
        />
        <link rel="stylesheet" href="/css/syntax.css" />
        <link rel="stylesheet" href="/css/prism.css" />
        <link rel="stylesheet" href="/css/tocbot.css" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/icon?family=Material+Icons"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.css"
            integrity="sha512-2kqK5bWDwdrluTn6Wkj+jgiwyzvAHLirVp08Kz7kN5I8PWQ0tUtEMxfhyWDCrnws91BJ9PfrUy6ImfA7Qb22TA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <link
            rel="stylesheet"
            href="/css/docsearch.css"
        />
        <!-- Newsletter form -->
        <style>
            @font-face {
                font-display: block;
                font-family: Roboto;
                src: url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/7529907e9eaf8ebb5220c5f9850e3811.woff2)
                        format('woff2'),
                    url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/25c678feafdc175a70922a116c9be3e7.woff)
                        format('woff');
            }

            @font-face {
                font-display: fallback;
                font-family: Roboto;
                font-weight: 600;
                src: url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/6e9caeeafb1f3491be3e32744bc30440.woff2)
                        format('woff2'),
                    url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/71501f0d8d5aa95960f6475d5487d4c2.woff)
                        format('woff');
            }

            @font-face {
                font-display: fallback;
                font-family: Roboto;
                font-weight: 700;
                src: url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/3ef7cf158f310cf752d5ad08cd0e7e60.woff2)
                        format('woff2'),
                    url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/ece3a1d82f18b60bcce0211725c476aa.woff)
                        format('woff');
            }

            #sib-container input:-ms-input-placeholder {
                text-align: left;
                font-family: 'Helvetica', sans-serif;
                color: #c0ccda;
            }

            #sib-container input::placeholder {
                text-align: left;
                font-family: 'Helvetica', sans-serif;
                color: #c0ccda;
            }

            #sib-container textarea::placeholder {
                text-align: left;
                font-family: 'Helvetica', sans-serif;
                color: #c0ccda;
            }
        </style>
        <link
            rel="stylesheet"
            href="/css/newsletter.css"
        />
    </head>

    <body>
        <header>
            <nav>
    <a href="#" data-target="slide-out" class="sidenav-trigger">
        <i class="material-icons">&#xe5d2;</i>
    </a>
    <div class="nav-wrapper">
        <div class="left react-admin-logo">
            <a href=""> <svg version="1.0" x="0px" y="0px" preserveAspectRatio="xMidYMid meet" viewBox="0 0 130 130" >
<style type="text/css">
	:root{
		--color: #ffffff;
	}
	.st0{opacity:0.3;}
	.st2{opacity:0.6;}
	.st1{fill: var(--color);}
</style>
<g id="layer3Fill" class="st0">
	<polygon class="st1" points="67.4,117.7 81.3,125.7 88.7,112.9 75.7,112.9 	"/>
	<polygon class="st1" points="12.3,67.5 4.4,81.2 17.2,88.6 17.2,76 	"/>
	<polygon class="st1" points="62.6,12.3 48.8,4.3 41.4,17.1 54.2,17.1 	"/>
	<polygon class="st1" points="117.7,62.6 125.7,48.8 112.8,41.3 112.8,54.1 	"/>
</g>
<g id="layer3Border" class="st2">
	<path class="st1" d="M39.2,17.1c0.5,0,1.7,0,2.2,0l7.4-12.8l13.8,8l1.9-1.1L48.1,1.7L39.2,17.1z"/>
	<path class="st1" d="M112.8,39.1c0,0.5,0,1.7,0,2.2l12.9,7.5l-8,13.8c0.3,0.5,0.8,1.5,1.1,2l9.5-16.5L112.8,39.1z"/>
	<path class="st1" d="M88.7,112.9l-7.4,12.8l-13.9-8l-1.9,1.1l16.5,9.5l8.9-15.4C90.4,112.9,89.2,112.9,88.7,112.9z"/>
	<path class="st1" d="M12.3,67.5c-0.3-0.5-0.8-1.4-1.1-1.9L1.8,82l15.4,8.9c0-0.6,0-1.7,0-2.3L4.4,81.2L12.3,67.5z"/>
</g>
<g id="layer2Fill" class="st2">
	<polygon class="st1" points="41.9,112.9 48.9,125.1 70.1,112.9 	"/>
	<polygon class="st1" points="17.2,70.1 17.2,41.9 5,49 	"/>
	<polygon class="st1" points="60.1,17.1 88.1,17.1 81.1,5 	"/>
	<polygon class="st1" points="112.8,60 112.8,88.2 125,81.1 	"/>
</g>
<g id="layer2Border">
	<polygon class="st1" points="17.2,76 17.2,70.1 5,49 17.2,41.9 17.2,38.5 1,47.9 	"/>
	<path class="st1" d="M54.2,17.1h5.9c0,0,19.9-11.5,21-12.1l7,12.1c0.8,0,2.5,0,3.3,0L82.1,1L54.2,17.1z"/>
	<polygon class="st1" points="112.8,54.1 112.8,60 125,81.1 112.8,88.2 112.8,91.5 129,82.2 	"/>
	<path class="st1" d="M48.9,125.1l-7-12.2c-0.8,0-2.6,0-3.4,0l9.3,16.1c6.7-3.9,21.4-12.3,27.9-16.1c-1.4,0-5.6,0-5.6,0L48.9,125.1z
		"/>
</g>
<path id="raBorder" class="st1" d="M17,17v96h96V17H17z M108,108H22V22h86V108z"/>
<g id="ra">
	<path id="aLetter" class="st1" d="M96.1,55.4c-0.7-1.9-2-3.2-3.7-4c-1.9-0.8-4.6-1.2-8.2-1.2c-4.2,0-7.9,0.3-11.1,1v4.2
		c1.2-0.2,2.7-0.4,4.7-0.5c1.9-0.1,3.5-0.2,4.8-0.2c2.9,0,5,0.2,6.2,0.5c1.3,0.4,2.1,1.2,2.5,2.3c0.5,1.2,0.7,3.2,0.7,6.1V66
		c-6.2-0.2-9.9-0.3-11.1-0.3c-2.5,0-4.5,0.3-5.9,1c-1.4,0.7-2.3,1.8-2.9,3.2c-0.6,1.4-0.9,3.5-0.9,6.2c0,3.9,0.9,6.5,2.4,8
		c1.7,1.5,4.2,2.1,7.8,2.1c2.4,0,4.6-0.4,6.4-1.1c1.9-0.7,3.2-2.1,4-4.3h0.3l0.3,4.9h4.7v-22C97.1,60,96.8,57.3,96.1,55.4z M92,71.6
		c0,2.9-0.4,5.4-1.3,7.1c-0.6,1.2-1.6,2-2.7,2.3c-1.3,0.4-2.8,0.6-4.7,0.8c-2,0-3.4-0.2-4.4-0.5c-0.9-0.4-1.6-1-2-1.8
		c-0.4-0.8-0.6-2.1-0.6-3.8s0.2-3,0.5-3.9c0.3-0.9,0.9-1.5,1.7-1.8s2.1-0.5,3.7-0.5H92V71.6z"/>
	<path id="rLetter" class="st1" d="M62.4,61.2c0.9-2.2,1.3-5.1,1.3-8.5c0-3.1-0.3-5.7-0.8-7.6c-0.5-2-1.7-3.5-3.4-4.7
		c-1.8-1.2-4.4-1.8-7.9-1.8H33.5v47.1H39V67h11.9h1.2l6.5,18.8h5.9L57.3,66C59.9,65,61.6,63.4,62.4,61.2z M55.4,61.2
		c-1.3,0.7-3.1,1-5.6,1H39V43.5h11.2c2.4,0,4.2,0.3,5.4,1c1.2,0.7,2,1.6,2.2,2.8c0.3,1.3,0.5,3,0.5,5.5c0,2.3-0.2,4.2-0.6,5.5
		C57.3,59.5,56.6,60.5,55.4,61.2z"/>
</g>
</svg>
 </a>
        </div>
        <div class="left">
            <div id="docsearch" class="center"></div>
        </div>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li class="active">
                <a href="/documentation.html">Documentation</a>
            </li>
            <li>
                <a href="/Demos.html">Demos</a>
            </li>
            <li>
                <a href="https://marmelab.com/en/blog/#react-admin">Blog</a>
            </li>
            <li>
                <a
                    href="https://marmelab.com/ra-enterprise/"
                    style="color: #f0c070"
                    >Enterprise Edition</a
                >
            </li>
            <li>
                <a
                    href="https://github.com/marmelab/react-admin"
                    title="GitHub"
                >
                    <svg
                        viewBox="0 0 256 250"
                        preserveAspectRatio="xMidYMid"
                        style="
                            height: 20px;
                            vertical-align: middle;
                            fill: #ffffff;
                        "
                    >
                        <path
                            d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403z"
                        ></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://discord.gg/GeZF9sqh3N" title="Discord">
                    <svg
                        height="25px"
                        width="25px"
                        viewBox="0 -28.5 256 256"
                        preserveAspectRatio="xMidYMid"
                        style="
                            height: 20px;
                            vertical-align: middle;
                            margin-right: 10px;
                            fill: #ffffff;
                        "
                    >
                        <path
                            d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z"
                        ></path>
                    </svg>
                </a>
            </li>
        </ul>
    </div>
</nav>

            <ul id="slide-out" class="sidenav sidenav-fixed">
                <li class="logo">
                    <a href=""
                        ><img src="/assets/logo_white.png"
                    /></a>
                </li>
                <li class="version">
<a class="dropdown-trigger" href="#" data-target="versions">
    
    
    
    <svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 10l5 5 5-5z"></path>
        <path d="M0 0h24v24H0z" fill="none"></path>
    </svg>
</a>
<ul id="versions" class="dropdown-content">
    
</ul>
</li>
                <a class="center-align switch" style="display:block;margin-bottom: 1em" name="beginner-mode" title="Hide the sections concerning advanced usage to navigate more easily in the documentation">
<label>
  <input type="checkbox" name="beginner-mode-trigger" id="beginner-mode-trigger" />
  <span class="lever"></span>
  Beginner Mode
</label>
</a>

<ul><div>Getting Started</div>
  <li  class="beginner" ><a class="nav-link" href="./Tutorial.html">Tutorial</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Features.html">Features</a></li>
  <li ><a class="nav-link" href="./Architecture.html">Key concepts</a></li>
  <li><a class="nav-link external" href="https://github.com/marmelab/react-admin/releases" target="_blank">What's new?</a></li>
  <li  class="beginner" ><a class="nav-link" href="./CreateReactAdmin.html">Create React Admin</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Vite.html">Vite</a></li>
  <li ><a class="nav-link" href="./NextJs.html">Next.js</a></li>
  <li ><a class="nav-link" href="./Remix.html">Remix</a></li>
  <li ><a class="nav-link" href="./CreateReactApp.html">Create React App</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Community.html">Community</a></li>
  <li ><a class="nav-link" href="./Upgrade.html">Upgrading to v4</a></li>
</ul>

<ul><div>App Configuration</div>
  <li  class="beginner" ><a class="nav-link" href="./Admin.html"><code>&lt;Admin&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Resource.html"><code>&lt;Resource&gt;</code></a></li>
  <li ><a class="nav-link" href="./CustomRoutes.html"><code>&lt;CustomRoutes&gt;</code></a></li>
</ul>

<ul><div>Data Fetching</div>
  <li  class="beginner" ><a class="nav-link" href="./DataProviders.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./DataProviderList.html">Supported backends</a></li>
  <li ><a class="nav-link" href="./DataProviderWriting.html">Writing A Data Provider</a></li>
  <li  class="active beginner" ><a class="nav-link" href="./Actions.html">Querying the API</a></li>
  <li ><a class="nav-link" href="./DataProviderLive.html">Real-time Updates &amp; Locks<img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useDataProvider.html"><code>useDataProvider</code></a></li>
  <li ><a class="nav-link" href="./useGetList.html"><code>useGetList</code></a></li>
  <li ><a class="nav-link" href="./useInfiniteGetList.html"><code>useInfiniteGetList</code></a></li>
  <li ><a class="nav-link" href="./useGetOne.html"><code>useGetOne</code></a></li>
  <li ><a class="nav-link" href="./useGetMany.html"><code>useGetMany</code></a></li>
  <li ><a class="nav-link" href="./useGetManyReference.html"><code>useGetManyReference</code></a></li>
  <li ><a class="nav-link" href="./useCreate.html"><code>useCreate</code></a></li>
  <li ><a class="nav-link" href="./useUpdate.html"><code>useUpdate</code></a></li>
  <li ><a class="nav-link" href="./useUpdateMany.html"><code>useUpdateMany</code></a></li>
  <li ><a class="nav-link" href="./useDelete.html"><code>useDelete</code></a></li>
  <li ><a class="nav-link" href="./useDeleteMany.html"><code>useDeleteMany</code></a></li>
  <li ><a class="nav-link" href="./useGetTree.html"><code>useGetTree</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./withLifecycleCallbacks.html"><code>withLifecycleCallbacks</code></a></li>
  <li ><a class="nav-link" href="./fetchJson.html"><code>fetchJson</code></a></li>
</ul>

<ul><div>Security</div>
  <li  class="beginner" ><a class="nav-link" href="./Authentication.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./AuthProviderList.html">Supported backends</a></li>
  <li  class="beginner" ><a class="nav-link" href="./AuthProviderWriting.html">Writing An Auth Provider</a></li>
  <li ><a class="nav-link" href="./Permissions.html">Permissions</a></li>
  <li ><a class="nav-link" href="./AuthRBAC.html">RBAC<img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Authenticated.html"><code>&lt;Authenticated&gt;</code></a></li>
  <li ><a class="nav-link" href="./IfCanAccess.html"><code>&lt;IfCanAccess&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./WithPermissions.html"><code>&lt;WithPermissions&gt;</code></a></li>
  <li ><a class="nav-link" href="./useAuthProvider.html"><code>useAuthProvider</code></a></li>
  <li ><a class="nav-link" href="./useAuthenticated.html"><code>useAuthenticated</code></a></li>
  <li ><a class="nav-link" href="./useAuthState.html"><code>useAuthState</code></a></li>
  <li ><a class="nav-link" href="./useGetIdentity.html"><code>useGetIdentity</code></a></li>
  <li ><a class="nav-link" href="./useLogin.html"><code>useLogin</code></a></li>
  <li ><a class="nav-link" href="./useLogout.html"><code>useLogout</code></a></li>
  <li ><a class="nav-link" href="./usePermissions.html"><code>usePermissions</code></a></li>
  <li ><a class="nav-link" href="./useCanAccess.html"><code>useCanAccess</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./canAccess.html"><code>canAccess</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./addRefreshAuthToAuthProvider.html"><code>addRefreshAuthToAuthProvider</code></a></li>
  <li ><a class="nav-link" href="./addRefreshAuthToDataProvider.html"><code>addRefreshAuthToDataProvider</code></a></li>
</ul>

<ul><div>List Page</div>
  <li  class="beginner" ><a class="nav-link" href="./ListTutorial.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./FilteringTutorial.html">Filtering The List</a></li>
  <li  class="beginner" ><a class="nav-link" href="./List.html"><code>&lt;List&gt;</code></a></li>
  <li ><a class="nav-link" href="./ListBase.html"><code>&lt;ListBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ListGuesser.html"><code>&lt;ListGuesser&gt;</code></a></li>
  <li ><a class="nav-link" href="./InfiniteList.html"><code>&lt;InfiniteList&gt;</code></a></li>
  <li ><a class="nav-link" href="./TreeWithDetails.html"><code>&lt;TreeWithDetails&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Datagrid.html"><code>&lt;Datagrid&gt;</code></a></li>
  <li ><a class="nav-link" href="./DatagridAG.html"><code>&lt;DatagridAG&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleList.html"><code>&lt;SimpleList&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SingleFieldList.html"><code>&lt;SingleFieldList&gt;</code></a></li>
  <li ><a class="nav-link" href="./EditableDatagrid.html"><code>&lt;EditableDatagrid&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Calendar.html"><code>&lt;Calendar&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./FilterButton.html"><code>&lt;FilterButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./FilterList.html"><code>&lt;FilterList&gt;</code></a></li>
  <li ><a class="nav-link" href="./FilterLiveSearch.html"><code>&lt;FilterLiveSearch&gt;</code></a></li>
  <li ><a class="nav-link" href="./SavedQueriesList.html"><code>&lt;SavedQueriesList&gt;</code></a></li>
  <li ><a class="nav-link" href="./StackedFilters.html"><code>&lt;StackedFilters&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Pagination.html"><code>&lt;Pagination&gt;</code></a></li>
  <li ><a class="nav-link" href="./SortButton.html"><code>&lt;SortButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./SelectColumnsButton.html"><code>&lt;SelectColumnsButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./Count.html"><code>&lt;Count&gt;</code></a></li>
  <li ><a class="nav-link" href="./WithListContext.html"><code>&lt;WithListContext&gt;</code></a></li>
  <li ><a class="nav-link" href="./useListContext.html"><code>useListContext</code></a></li>
  <li ><a class="nav-link" href="./useList.html"><code>useList</code></a></li>
  <li ><a class="nav-link" href="./useListController.html"><code>useListController</code></a></li>
  <li ><a class="nav-link" href="./useUnselect.html"><code>useUnselect</code></a></li>
  <li ><a class="nav-link" href="./useUnselectAll.html"><code>useUnselectAll</code></a></li>
</ul>

<ul><div>Creation & Edition Pages</div>
  <li  class="beginner" ><a class="nav-link" href="./EditTutorial.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Validation.html">Form Validation</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Create.html"><code>&lt;Create&gt;</code></a></li>
  <li ><a class="nav-link" href="./CreateBase.html"><code>&lt;CreateBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Edit.html"><code>&lt;Edit&gt;</code></a></li>
  <li ><a class="nav-link" href="./EditBase.html"><code>&lt;EditBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./EditGuesser.html"><code>&lt;EditGuesser&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleForm.html"><code>&lt;SimpleForm&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TabbedForm.html"><code>&lt;TabbedForm&gt;</code></a></li>
  <li ><a class="nav-link" href="./Form.html"><code>&lt;Form&gt;</code></a></li>
  <li ><a class="nav-link" href="./LongForm.html"><code>&lt;LongForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./AccordionForm.html"><code>&lt;AccordionForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./WizardForm.html"><code>&lt;WizardForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./EditDialog.html"><code>&lt;EditDialog&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./EditInDialogButton.html"><code>&lt;EditInDialogButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./CreateDialog.html"><code>&lt;CreateDialog&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./CreateInDialogButton.html"><code>&lt;CreateInDialogButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./JsonSchemaForm.html"><code>&lt;JsonSchemaForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Toolbar.html"><code>&lt;Toolbar&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SaveButton.html"><code>&lt;SaveButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./AutoSave.html"><code>&lt;AutoSave&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useCreateContext.html"><code>useCreateContext</code></a></li>
  <li ><a class="nav-link" href="./useCreateController.html"><code>useCreateController</code></a></li>
  <li ><a class="nav-link" href="./useEditContext.html"><code>useEditContext</code></a></li>
  <li ><a class="nav-link" href="./useEditController.html"><code>useEditController</code></a></li>
  <li ><a class="nav-link" href="./useSaveContext.html"><code>useSaveContext</code></a></li>
  <li ><a class="nav-link" href="./useRegisterMutationMiddleware.html"><code>useRegisterMutationMiddleware</code></a></li>
  <li ><a class="nav-link" href="./useUnique.html"><code>useUnique</code></a></li>
</ul>

<ul><div>Show Page</div>
  <li  class="beginner" ><a class="nav-link" href="./ShowTutorial.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Show.html"><code>&lt;Show&gt;</code></a></li>
  <li ><a class="nav-link" href="./ShowBase.html"><code>&lt;ShowBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ShowGuesser.html"><code>&lt;ShowGuesser&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleShowLayout.html"><code>&lt;SimpleShowLayout&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TabbedShowLayout.html"><code>&lt;TabbedShowLayout&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Labeled.html"><code>&lt;Labeled&gt;</code></a></li>
  <li ><a class="nav-link" href="./ShowInDialogButton.html"><code>&lt;ShowInDialogButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useShowContext.html"><code>useShowContext</code></a></li>
  <li ><a class="nav-link" href="./useShowController.html"><code>useShowController</code></a></li>
</ul>

<ul><div>Common</div>
  <li  class="beginner" ><a class="nav-link" href="./WithRecord.html"><code>&lt;WithRecord&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./useRecordContext.html"><code>useRecordContext</code></a></li>
  <li ><a class="nav-link" href="./useGetRecordId.html"><code>useGetRecordId</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./useNotify.html"><code>useNotify</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./useRedirect.html"><code>useRedirect</code></a></li>
  <li ><a class="nav-link" href="./useRefresh.html"><code>useRefresh</code></a></li>
</ul>

<ul><div>Fields</div>
  <li  class="beginner" ><a class="nav-link" href="./Fields.html">Introduction</a></li>
  <li ><a class="nav-link" href="./FieldsForRelationships.html">Fields for Relationships</a></li>
  <li  class="beginner" ><a class="nav-link" href="./ArrayField.html"><code>&lt;ArrayField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./BooleanField.html"><code>&lt;BooleanField&gt;</code></a></li>
  <li ><a class="nav-link" href="./ChipField.html"><code>&lt;ChipField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./DateField.html"><code>&lt;DateField&gt;</code></a></li>
  <li ><a class="nav-link" href="./EmailField.html"><code>&lt;EmailField&gt;</code></a></li>
  <li ><a class="nav-link" href="./FileField.html"><code>&lt;FileField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./FunctionField.html"><code>&lt;FunctionField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ImageField.html"><code>&lt;ImageField&gt;</code></a></li>
  <li ><a class="nav-link" href="./MarkdownField.html"><code>&lt;MarkdownField&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./NumberField.html"><code>&lt;NumberField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceField.html"><code>&lt;ReferenceField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceArrayField.html"><code>&lt;ReferenceArrayField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceManyField.html"><code>&lt;ReferenceManyField&gt;</code></a></li>
  <li ><a class="nav-link" href="./ReferenceManyCount.html"><code>&lt;ReferenceManyCount&gt;</code></a></li>
  <li ><a class="nav-link" href="./ReferenceManyToManyField.html"><code>&lt;ReferenceManyToManyField&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceOneField.html"><code>&lt;ReferenceOneField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./RichTextField.html"><code>&lt;RichTextField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SelectField.html"><code>&lt;SelectField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TextField.html"><code>&lt;TextField&gt;</code></a></li>
  <li ><a class="nav-link" href="./TranslatableFields.html"><code>&lt;TranslatableFields&gt;</code></a></li>
  <li ><a class="nav-link" href="./UrlField.html"><code>&lt;UrlField&gt;</code></a></li>
  <li ><a class="nav-link" href="./WrapperField.html"><code>&lt;WrapperField&gt;</code></a></li>
</ul>

<ul><div>Inputs</div>
  <li  class="beginner" ><a class="nav-link" href="./Inputs.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./ArrayInput.html"><code>&lt;ArrayInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./AutocompleteInput.html"><code>&lt;AutocompleteInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./AutocompleteArrayInput.html"><code>&lt;AutocompleteArrayInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./BooleanInput.html"><code>&lt;BooleanInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./CheckboxGroupInput.html"><code>&lt;CheckboxGroupInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./DateInput.html"><code>&lt;DateInput></code></a></li>
  <li ><a class="nav-link" href="./DateTimeInput.html"><code>&lt;DateTimeInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./DualListInput.html"><code>&lt;DualListInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./FileInput.html"><code>&lt;FileInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./ImageInput.html"><code>&lt;ImageInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./MarkdownInput.html"><code>&lt;MarkdownInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./NullableBooleanInput.html"><code>&lt;NullableBooleanInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./NumberInput.html"><code>&lt;NumberInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./PasswordInput.html"><code>&lt;PasswordInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./PredictiveTextInput.html"><code>&lt;PredictiveTextInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./RadioButtonGroupInput.html"><code>&lt;RadioButtonGroupInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceInput.html"><code>&lt;ReferenceInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceArrayInput.html"><code>&lt;ReferenceArrayInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./ReferenceManyInput.html"><code>&lt;ReferenceManyInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceManyToManyInput.html"><code>&lt;ReferenceManyToManyInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceNodeInput.html"><code>&lt;ReferenceNodeInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceOneInput.html"><code>&lt;ReferenceOneInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./RichTextInput.html"><code>&lt;RichTextInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SearchInput.html"><code>&lt;SearchInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SelectInput.html"><code>&lt;SelectInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SelectArrayInput.html"><code>&lt;SelectArrayInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleFormIterator.html"><code>&lt;SimpleFormIterator&gt;</code></a></li>
  <li ><a class="nav-link" href="./SmartRichTextInput.html"><code>&lt;SmartRichTextInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TextInput.html"><code>&lt;TextInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./TimeInput.html"><code>&lt;TimeInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./TranslatableInputs.html"><code>&lt;TranslatableInputs&gt;</code></a></li>
  <li ><a class="nav-link" href="./TreeInput.html"><code>&lt;TreeInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useInput.html"><code>useInput</code></a></li>
</ul>

<ul><div>Preferences</div>
  <li ><a class="nav-link" href="./Store.html">Introduction</a></li>
  <li ><a class="nav-link" href="./useStore.html"><code>useStore</code></a></li>
  <li ><a class="nav-link" href="./useRemoveFromStore.html"><code>useRemoveFromStore</code></a></li>
  <li ><a class="nav-link" href="./useResetStore.html"><code>useResetStore</code></a></li>
  <li ><a class="nav-link" href="./useStoreContext.html"><code>useStoreContext</code></a></li>
  <li ><a class="nav-link" href="./Configurable.html"><code>&lt;Configurable&gt;</code></a></li>
</ul>

<ul><div>I18N Provider and Translations</div>
  <li ><a class="nav-link" href="./Translation.html">Introduction</a></li>
  <li ><a class="nav-link" href="./TranslationSetup.html">Setting Up</a></li>
  <li ><a class="nav-link" href="./TranslationLocales.html">Supported Locales</a></li>
  <li ><a class="nav-link" href="./TranslationTranslating.html">Translating UI Components</a></li>
  <li ><a class="nav-link" href="./TranslationWriting.html">Writing an i18nProvider</a></li>
  <li ><a class="nav-link" href="./useTranslate.html"><code>useTranslate</code></a></li>
  <li ><a class="nav-link" href="./useLocaleState.html"><code>useLocaleState</code></a></li>
  <li ><a class="nav-link" href="./LocalesMenuButton.html"><code>&lt;LocalesMenuButton&gt;</code></a></li>
</ul>

<ul><div>Other UI components</div>
  <li  class="beginner" ><a class="nav-link" href="./Layout.html"><code>&lt;Layout&gt;</code></a></li>
  <li ><a class="nav-link" href="./ContainerLayout.html"><code>&lt;ContainerLayout&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./SolarLayout.html"><code>&lt;SolarLayout&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./AppBar.html"><code>&lt;AppBar&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Menu.html"><code>&lt;Menu&gt;</code></a></li>
  <li ><a class="nav-link" href="./MultiLevelMenu.html"><code>&lt;MultiLevelMenu&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./IconMenu.html"><code>&lt;IconMenu&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Title.html"><code>&lt;Title&gt;</code></a></li>
  <li ><a class="nav-link" href="./Breadcrumb.html"><code>&lt;Breadcrumb&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Search.html"><code>&lt;Search&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./SearchWithResult.html"><code>&lt;SearchWithResult&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Confirm.html"><code>&lt;Confirm&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Buttons.html">Buttons</a></li>
  <li ><a class="nav-link" href="./RevisionsButton.html"><code>&lt;RevisionsButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./CheckForApplicationUpdate.html"><code>&lt;CheckForApplicationUpdate&gt;</code></a></li>
  <li ><a class="nav-link" href="./UpdateButton.html"><code>&lt;UpdateButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./RecordRepresentation.html"><code>&lt;RecordRepresentation&gt;</code></a></li>
  <li ><a class="nav-link" href="./PrevNextButtons.html"><code>&lt;PrevNextButtons&gt;</code></a></li>
  <li ><a class="nav-link" href="./useDefineAppLocation.html"><code>useDefineAppLocation</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetRecordRepresentation.html"><code>useGetRecordRepresentation</code></a></li>
</ul>

<ul><div>Theming</div>
  <li  class="beginner" ><a class="nav-link" href="./Theming.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./SX.html">The <code>sx</code> prop</a></li>
  <li  class="beginner" ><a class="nav-link" href="./AppTheme.html">Application Theme</a></li>
  <li ><a class="nav-link" href="./BoxStackGrid.html"><code>&lt;Box&gt;</code>, <code>&lt;Stack&gt;</code> and <code>&lt;Grid&gt;</code></a></li>
  <li ><a class="nav-link" href="./ToggleThemeButton.html"><code>&lt;ToggleThemeButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./useMediaQuery.html"><code>useMediaQuery</code></a></li>
  <li ><a class="nav-link" href="./useTheme.html"><code>useTheme</code></a></li>
</ul>

<ul><div>Realtime</div>
  <li ><a class="nav-link" href="./Realtime.html">Introduction</a></li>
  <li ><a class="nav-link" href="./RealtimeDataProvider.html">Data Provider Requirements</a></li>
  <li ><a class="nav-link" href="./usePublish.html"><code>usePublish</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribe.html"><code>useSubscribe</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribeCallback.html"><code>useSubscribeCallback</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribeToRecord.html"><code>useSubscribeToRecord</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribeToRecordList.html"><code>useSubscribeToRecordList</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useLock.html"><code>useLock</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useUnlock.html"><code>useUnlock</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLock.html"><code>useGetLock</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLockLive.html"><code>useGetLockLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLocks.html"><code>useGetLocks</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLocksLive.html"><code>useGetLocksLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useLockOnMount.html"><code>useLockOnMount</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useLockOnCall.html"><code>useLockOnCall</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetListLive.html"><code>useGetListLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetOneLive.html"><code>useGetOneLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ListLive.html"><code>&lt;ListLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./EditLive.html"><code>&lt;EditLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ShowLive.html"><code>&lt;ShowLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./MenuLive.html"><code>&lt;MenuLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
</ul>

<ul><div>Recipes</div>
  <li ><a class="nav-link" href="./Caching.html">Caching</a></li>
  <li ><a class="nav-link" href="./Routing.html">Routing</a></li>
  <li ><a class="nav-link" href="./UnitTesting.html">Unit Testing</a></li>
  <li ><a class="nav-link" href="./AdvancedTutorials.html">Advanced tutorials</a></li>
</ul>

<li ><a class="nav-link" href="./Ecosystem.html">Ecosystem</a></li>
<li ><a class="nav-link" href="./FAQ.html">FAQ</a></li>
<li  class="beginner" ><a class="nav-link" href="./Reference.html">Index</a></li>

<div class="beginner-mode-on" style="margin:1em;padding:1em;background:#ffffca;border-radius:4px;display:none;font-size:0.8em;opacity:0.8;text-align:center;">
  <a href="#beginner-mode">Beginner mode is on</a>. Turn it off to reveal more documentation for advanced components.
</div>

            </ul>
        </header>

        <main>
            <div class="container sticker-container">
                <div class="row">
                    <div class="col s12 m9">
                        <div
                            class="markdown-section DocSearch-content toc-content"
                        >
                            <h1 id="apiのクエリ実行">APIのクエリ実行</h1>

<p>React-adminは、読み取りおよび書き込みクエリを<a href="./DataProviders.md"><code class="language-plaintext highlighter-rouge">dataProvider</code></a>に送信するための特別なフックを提供します。<code class="language-plaintext highlighter-rouge">dataProvider</code>はあなたのAPIにリクエストを送信します。内部では、<a href="https://tanstack.com/query/v3/">react-query</a>を使用して<code class="language-plaintext highlighter-rouge">dataProvider</code>を呼び出し、その結果をキャッシュします。</p>

<h2 id="dataproviderインスタンスの取得"><code class="language-plaintext highlighter-rouge">dataProvider</code>インスタンスの取得</h2>

<p>React-adminは<code class="language-plaintext highlighter-rouge">dataProvider</code>オブジェクトをReactコンテキストに保存しているため、アプリケーションコードのどこからでもアクセスできます。<code class="language-plaintext highlighter-rouge">useDataProvider</code>フックはそのコンテキストから<code class="language-plaintext highlighter-rouge">dataProvider</code>を取得し、直接呼び出すことができます。</p>

<p>例えば、現在のユーザープロファイルを<code class="language-plaintext highlighter-rouge">dataProvider</code>にクエリする方法は次の通りです:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">import</span> <span class="p">{</span> <span class="nx">useDataProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">MyComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nx">useDataProvider</span><span class="p">();</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>詳細については、<a href="./useDataProvider.md"><code class="language-plaintext highlighter-rouge">useDataProvider</code>フックのドキュメント</a>を参照してください。</p>

<p><strong>ヒント</strong>: フックによって返される<code class="language-plaintext highlighter-rouge">dataProvider</code>は、実際にはあなたの<code class="language-plaintext highlighter-rouge">dataProvider</code>の<em>ラッパー</em>です。このラッパーは、<code class="language-plaintext highlighter-rouge">dataProvider</code>がエラーを返した場合にユーザーをログアウトさせ、<code class="language-plaintext highlighter-rouge">authProvider</code>がそのエラーを認証エラーと見なす場合（<code class="language-plaintext highlighter-rouge">authProvider.checkError()</code>を通じて）にログアウトさせます。</p>

<h2 id="dataproviderメソッドフック">DataProviderメソッドフック</h2>

<p>React-adminは、各Data Providerメソッドに対して1つのフックを提供します。これらはコードをより読みやすくし、より堅牢にするための便利なショートカットです。</p>

<p>クエリフックはマウント時に実行され、次のプロパティを持つオブジェクトを返します: <code class="language-plaintext highlighter-rouge">{ data, isLoading, error }</code>。クエリフックには次のものがあります:</p>

<ul>
  <li><a href="./useGetList.md"><code class="language-plaintext highlighter-rouge">useGetList</code></a></li>
  <li><a href="./useGetOne.md"><code class="language-plaintext highlighter-rouge">useGetOne</code></a></li>
  <li><a href="./useGetMany.md"><code class="language-plaintext highlighter-rouge">useGetMany</code></a></li>
  <li><a href="./useGetManyReference.md"><code class="language-plaintext highlighter-rouge">useGetManyReference</code></a></li>
</ul>

<p>ミューテーションフックはコールバックを呼び出したときにクエリを実行し、次の項目を含む配列を返します: <code class="language-plaintext highlighter-rouge">[mutate, { data, isLoading, error }]</code>。ミューテーションフックには次のものがあります:</p>

<ul>
  <li><a href="./useCreate.md"><code class="language-plaintext highlighter-rouge">useCreate</code></a></li>
  <li><a href="./useUpdate.md"><code class="language-plaintext highlighter-rouge">useUpdate</code></a></li>
  <li><a href="./useUpdateMany.md"><code class="language-plaintext highlighter-rouge">useUpdateMany</code></a></li>
  <li><a href="./useDelete.md"><code class="language-plaintext highlighter-rouge">useDelete</code></a></li>
  <li><a href="./useDeleteMany.md"><code class="language-plaintext highlighter-rouge">useDeleteMany</code></a></li>
</ul>

<p>そのシグネチャは関連する<code class="language-plaintext highlighter-rouge">dataProvider</code>メソッドと同じです。例えば：</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// dataProvider.getOne(resource, { id })を呼び出します</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">});</span>
</code></pre></div></div>

<p>例えば、<code class="language-plaintext highlighter-rouge">useGetOne</code>フックを使用してAPIから1つのレコードを取得する方法は次の通りです:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useGetOne</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Loading</span><span class="p">,</span> <span class="nb">Error</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./MyComponents</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">UserProfile</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">userId</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Loading</span> <span class="p">/&gt;;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Error</span> <span class="p">/&gt;;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Name: <span class="si">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Email: <span class="si">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">)</span>
<span class="p">};</span>
</code></pre></div></div>

<p>次に、<code class="language-plaintext highlighter-rouge">useUpdate()</code>を使用した別の例を示します:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useUpdate</span><span class="p">,</span> <span class="nx">useRecordContext</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ApproveButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">approve</span><span class="p">,</span> <span class="p">{</span> <span class="nx">isLoading</span> <span class="p">}]</span> <span class="o">=</span> <span class="nx">useUpdate</span><span class="p">(</span><span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">isApproved</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span> <span class="na">previousData</span><span class="p">:</span> <span class="nx">record</span> <span class="p">});</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Approve"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">approve</span><span class="p">()</span><span class="si">}</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">isLoading</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>クエリフックとミューテーションフックの両方は、クエリオプションを上書きするための<code class="language-plaintext highlighter-rouge">options</code>引数を受け取ります:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">enabled</span><span class="p">:</span> <span class="nx">userId</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>ヒント</strong>: TypeScriptを使用する場合、レコードタイプを指定してより型安全にすることができます:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="o">&lt;</span><span class="nx">Product</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">products</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">});</span>
<span class="c1">//        \- dataの型はProductになります</span>
</code></pre></div></div>

<h2 id="metaパラメータ"><code class="language-plaintext highlighter-rouge">meta</code>パラメータ</h2>

<p>すべてのData Providerメソッドは<code class="language-plaintext highlighter-rouge">meta</code>パラメータを受け取ります。React-adminはデフォルトではクエリにこのパラメータを設定しませんが、APIコールに特別な引数やメタデータを渡すための良い方法です。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">books</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="na">meta</span><span class="p">:</span> <span class="p">{</span> <span class="na">_embed</span><span class="p">:</span> <span class="dl">'</span><span class="s1">authors</span><span class="dl">'</span> <span class="p">}</span> <span class="p">},</span>
<span class="p">);</span>
</code></pre></div></div>

<p>このパラメータを解釈するのはData Provider次第です。</p>

<h2 id="usequeryとusemutation"><code class="language-plaintext highlighter-rouge">useQuery</code>と<code class="language-plaintext highlighter-rouge">useMutation</code></h2>

<p>内部的には、react-adminは<a href="https://tanstack.com/query/v3/">react-query</a>を使用して<code class="language-plaintext highlighter-rouge">dataProvider</code>を呼び出します。コンポーネントで<code class="language-plaintext highlighter-rouge">dataProvider</code>からデータを取得する際、どの<code class="language-plaintext highlighter-rouge">dataProvider</code>メソッドフックも使用できない場合は、そのライブラリを使用することをお勧めします。以下のような利点があります:</p>

<ol>
  <li>クエリが実行されているときにAppBarのローダーがトリガーされる。</li>
  <li><code class="language-plaintext highlighter-rouge">useState</code>を使用する必要がないため、ボイラープレートコードが削減される。</li>
  <li>多くのオプションをサポートする。</li>
  <li>最新のデータを取得する間、古いデータを表示し続けるため、UIがよりスムーズになる。</li>
</ol>

<p>React-queryは、<code class="language-plaintext highlighter-rouge">dataProvider</code>と対話するための2つの主要なフックを提供します:</p>

<ul>
  <li><a href="https://tanstack.com/query/v3/docs/react/reference/useQuery"><code class="language-plaintext highlighter-rouge">useQuery</code></a>: マウント時に<code class="language-plaintext highlighter-rouge">dataProvider</code>をフェッチします。これは読み取りクエリ用です。</li>
  <li><a href="https://tanstack.com/query/v3/docs/react/reference/useMutation"><code class="language-plaintext highlighter-rouge">useMutation</code></a>: コールバックを呼び出したときに<code class="language-plaintext highlighter-rouge">dataProvider</code>をフェッチします。これは書き込みクエリ用で、ユーザー操作で実行される読み取りクエリにも使用されます。</li>
</ul>

<p>これらのフックは、クエリキャッシュ内のクエリを識別するための<em>キー</em>と、クエリを実行しPromiseを返す<em>関数</em>を受け取ります。内部的には、react-adminは引数の配列をクエリキーとして使用します。</p>

<p>例えば、この章の最初のコードスニペットは、<code class="language-plaintext highlighter-rouge">useQuery</code>を使用して次のように書き直すことができます:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-query</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useDataProvider</span><span class="p">,</span> <span class="nx">Loading</span><span class="p">,</span> <span class="nb">Error</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">UserProfile</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">userId</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nx">useDataProvider</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">(</span>
        <span class="p">[</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">getOne</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">}],</span> 
        <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">dataProvider</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">})</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Loading</span> <span class="p">/&gt;;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Error</span> <span class="p">/&gt;;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Name: <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Email: <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">)</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">useMutation</code>の使用法を説明するために、コメントの”Approve”ボタンの実装を示します:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useMutation</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-query</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useDataProvider</span><span class="p">,</span> <span class="nx">useRecordContext</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ApproveButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nx">useDataProvider</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">mutate</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useMutation</span><span class="p">(</span>
        <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">dataProvider</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">isApproved</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">})</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Approve"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">mutate</span><span class="p">()</span><span class="si">}</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">isLoading</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>データプロバイダーメソッドフックを超えて使用したい場合は、<a href="https://react-query-v3.tanstack.com/overview">react-queryのドキュメント</a>を読むことをお勧めします。</p>

<h2 id="isloading対isfetching"><code class="language-plaintext highlighter-rouge">isLoading</code>対<code class="language-plaintext highlighter-rouge">isFetching</code></h2>

<p>データフェッチングフックは2つのロード状態変数を返します: <code class="language-plaintext highlighter-rouge">isLoading</code>と<code class="language-plaintext highlighter-rouge">isFetching</code>。どちらを使用するべきでしょうか？</p>

<p>簡単な答えは: <code class="language-plaintext highlighter-rouge">isLoading</code>を使用してください。以下にその理由を説明します。</p>

<p>これら2つの変数の出所は<a href="https://react-query-v3.tanstack.com/guides/queries#query-basics">react-query</a>です。彼らはこれらの2つの変数を次のように定義しています:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">isLoading</code>: クエリにデータがなく、現在フェッチ中である</li>
  <li><code class="language-plaintext highlighter-rouge">isFetching</code>: クエリが任意の状態でフェッチ中である場合（バックグラウンドフェッチを含む）、<code class="language-plaintext highlighter-rouge">isFetching</code>はtrueになります。</li>
</ul>

<p>典型的な使用シナリオでこれらの変数が何を含むかを見てみましょう:</p>

<ol>
  <li>ユーザーが最初にページを読み込む。<code class="language-plaintext highlighter-rouge">isLoading</code>はtrueです。データが一度もロードされておらず、<code class="language-plaintext highlighter-rouge">isFetching</code>もデータがフェッチされているためtrueです。</li>
  <li><code class="language-plaintext highlighter-rouge">dataProvider</code>がデータを返します。<code class="language-plaintext highlighter-rouge">isLoading</code>も<code class="language-plaintext highlighter-rouge">isFetching</code>もfalseになります。</li>
  <li>ユーザーが離れる</li>
  <li>ユーザーが最初のページに戻り、新しいフェッチがトリガーされます。<code class="language-plaintext highlighter-rouge">isLoading</code>はfalseです。古いデータがあり、<code class="language-plaintext highlighter-rouge">isFetching</code>はデータが<code class="language-plaintext highlighter-rouge">dataProvider</code>を介してフェッチされているためtrueです。</li>
  <li><code class="language-plaintext highlighter-rouge">dataProvider</code>がデータを返します。<code class="language-plaintext highlighter-rouge">isLoading</code>も<code class="language-plaintext highlighter-rouge">isFetching</code>もfalseになります。</li>
</ol>

<p>コンポーネントは、表示するデータがない場合にロードインジケータを表示するためにロード状態を使用します。上記の例では、ステップ2ではロードインジケータが必要ですが、ステップ4では古いデータを表示できるため不要です。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useGetOne</span><span class="p">,</span> <span class="nx">useRecordContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">UserProfile</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span> <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Loading</span> <span class="p">/&gt;;</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>ERROR<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;;</span> <span class="p">}</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>User <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>そのため、ロードインジケータを表示する必要がある場合は常に<code class="language-plaintext highlighter-rouge">isLoading</code>を使用する必要があります。</p>

<h2 id="カスタムメソッドの呼び出し">カスタムメソッドの呼び出し</h2>

<p>管理インターフェースでは、CRUDリクエストを超えてAPIにクエリを実行する必要があることがよくあります。例えば、ユーザープロファイルページではユーザーIDに基づいてユーザーオブジェクトを取得する必要があるかもしれません。また、ユーザーがボタンを押してコメントを「承認」したい場合、このアクションは<code class="language-plaintext highlighter-rouge">is_approved</code>プロパティを更新し、1クリックで更新されたレコードを保存する必要があります。</p>

<p>あなたの<code class="language-plaintext highlighter-rouge">dataProvider</code>にはカスタムメソッドが含まれているかもしれません。例えば、APIのRPCエンドポイントを呼び出すためのメソッドです。<code class="language-plaintext highlighter-rouge">useQuery</code>と<code class="language-plaintext highlighter-rouge">useMutation</code>はこれらのメソッドを呼び出すために特に役立ちます。</p>

<p>例えば、あなたの<code class="language-plaintext highlighter-rouge">dataProvider</code>が<code class="language-plaintext highlighter-rouge">banUser()</code>メソッドを公開している場合:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">getList</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">getOne</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">getMany</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">getManyReference</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">create</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">update</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">updateMany</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">delete</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">deleteMany</span><span class="p">:</span> <span class="cm">/* ... */</span><span class="p">,</span>
    <span class="na">banUser</span><span class="p">:</span> <span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`/api/user/</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">/ban`</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span> <span class="p">})</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>次のように<code class="language-plaintext highlighter-rouge">&lt;BanUser&gt;</code>ボタンコンポーネント内で呼び出すことができます:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">BanUserButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">userId</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nx">useDataProvider</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">mutate</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useMutation</span><span class="p">(</span>
        <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">dataProvider</span><span class="p">.</span><span class="nx">banUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Ban"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">mutate</span><span class="p">()</span><span class="si">}</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">isLoading</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="クエリオプション">クエリオプション</h2>

<p>データプロバイダーメソッドフック（<code class="language-plaintext highlighter-rouge">useGetOne</code>など）およびreact-queryのフック（<code class="language-plaintext highlighter-rouge">useQuery</code>など）は、最後の引数としてクエリオプションオブジェクトを受け取ります。このオブジェクトは、クエリの実行方法を変更するために使用できます。多くのオプションがあり、すべて<a href="https://tanstack.com/query/v3/docs/react/reference/useQuery">react-queryのドキュメント</a>に記載されています:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cacheTime</code></li>
  <li><code class="language-plaintext highlighter-rouge">enabled</code></li>
  <li><code class="language-plaintext highlighter-rouge">initialData</code></li>
  <li><code class="language-plaintext highlighter-rouge">initialDataUpdatedA</code></li>
  <li><code class="language-plaintext highlighter-rouge">isDataEqual</code></li>
  <li><code class="language-plaintext highlighter-rouge">keepPreviousData</code></li>
  <li><code class="language-plaintext highlighter-rouge">meta</code></li>
  <li><code class="language-plaintext highlighter-rouge">notifyOnChangeProps</code></li>
  <li><code class="language-plaintext highlighter-rouge">notifyOnChangePropsExclusions</code></li>
  <li><code class="language-plaintext highlighter-rouge">onError</code></li>
  <li><code class="language-plaintext highlighter-rouge">onSettled</code></li>
  <li><code class="language-plaintext highlighter-rouge">onSuccess</code></li>
  <li><code class="language-plaintext highlighter-rouge">queryKeyHashFn</code></li>
  <li><code class="language-plaintext highlighter-rouge">refetchInterval</code></li>
  <li><code class="language-plaintext highlighter-rouge">refetchIntervalInBackground</code></li>
  <li><code class="language-plaintext highlighter-rouge">refetchOnMount</code></li>
  <li><code class="language-plaintext highlighter-rouge">refetchOnReconnect</code></li>
  <li><code class="language-plaintext highlighter-rouge">refetchOnWindowFocus</code></li>
  <li><code class="language-plaintext highlighter-rouge">retry</code></li>
  <li><code class="language-plaintext highlighter-rouge">retryOnMount</code></li>
  <li><code class="language-plaintext highlighter-rouge">retryDelay</code></li>
  <li><code class="language-plaintext highlighter-rouge">select</code></li>
  <li><code class="language-plaintext highlighter-rouge">staleTime</code></li>
  <li><code class="language-plaintext highlighter-rouge">structuralSharing</code></li>
  <li><code class="language-plaintext highlighter-rouge">suspense</code></li>
  <li><code class="language-plaintext highlighter-rouge">useErrorBoundary</code></li>
</ul>

<p>例えば、クエリが完了したときにコールバックを実行したい場合（成功したか失敗したかに関わらず）、<code class="language-plaintext highlighter-rouge">onSettled</code>オプションを使用できます。これは例えば、dataProviderのすべての呼び出しをログに記録するのに役立ちます:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useGetOne</span><span class="p">,</span> <span class="nx">useRecordContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">UserProfile</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">onSettled</span><span class="p">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Loading</span> <span class="p">/&gt;;</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>ERROR<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;;</span> <span class="p">}</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>User <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>これらのオプションをすべて再説明することはしませんが、react-adminで最も有用なものに焦点を当てます。</p>

<p><strong>ヒント</strong>: data providerメソッドフックを使用するreact-adminコンポーネントでは、<code class="language-plaintext highlighter-rouge">queryOptions</code>プロップを使用してクエリオプションを上書きし、<code class="language-plaintext highlighter-rouge">mutationOptions</code>プロップを使用してミューテーションオプションを上書きすることができます。例えば、<code class="language-plaintext highlighter-rouge">&lt;List&gt;</code>コンポーネントでdataProvider呼び出しをログに記録するには、次のようにします:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span>
        <span class="na">queryOptions</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">onSettled</span><span class="p">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">}</span><span class="si">}</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="依存クエリの同期">依存クエリの同期</h2>

<p>すべてのData Providerフックは<code class="language-plaintext highlighter-rouge">enabled</code>オプションをサポートしています。これは、条件が満たされたときにのみクエリを実行する必要がある場合に便利です。</p>

<p>例えば、次のコードは、少なくとも1つのポストがすでにロードされている場合にのみカテゴリをフェッチします:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ポストをフェッチ</span>
<span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">posts</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetList</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">pagination</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">perPage</span><span class="p">:</span> <span class="mi">20</span> <span class="p">},</span> <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">}</span> <span class="p">},</span>
<span class="p">);</span>

<span class="c1">// その後、これらのポストのカテゴリをフェッチ</span>
<span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">categories</span><span class="p">,</span> <span class="na">isLoading</span><span class="p">:</span> <span class="nx">isLoadingCategories</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetMany</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">categories</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="nx">posts</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">post</span> <span class="o">=&gt;</span> <span class="nx">posts</span><span class="p">.</span><span class="nx">category_id</span><span class="p">)</span> <span class="p">},</span>
    <span class="c1">// 最初のクエリが空でない結果を返した場合にのみ実行</span>
    <span class="p">{</span> <span class="na">enabled</span><span class="p">:</span> <span class="o">!</span><span class="nx">isLoading</span> <span class="o">&amp;&amp;</span> <span class="nx">posts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="成功とエラーの副作用">成功とエラーの副作用</h2>

<p>クエリやミューテーションが完了した後にロジックを実行するには、<code class="language-plaintext highlighter-rouge">onSuccess</code>と<code class="language-plaintext highlighter-rouge">onError</code>オプションを使用します。React-adminはこのタイプのロジックを「副作用」と呼び、通常はUIの他の部分を変更します。</p>

<p>これは、ミューテーションフック（例: <code class="language-plaintext highlighter-rouge">useUpdate</code>）を使用する際に非常に一般的であり、通知を表示したり、別のページにリダイレクトするために使用されます。例えば、次の<code class="language-plaintext highlighter-rouge">&lt;ApproveButton&gt;</code>は、成功または失敗をユーザーに通知するために下部の通知バナーを使用します:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useUpdate</span><span class="p">,</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRedirect</span><span class="p">,</span> <span class="nx">useRecordContext</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ApproveButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nx">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nx">useRedirect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">approve</span><span class="p">,</span> <span class="p">{</span> <span class="nx">isLoading</span> <span class="p">}]</span> <span class="o">=</span> <span class="nx">useUpdate</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">isApproved</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">onSuccess</span><span class="p">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="c1">// 成功時の副作用をここに記述</span>
                <span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/comments</span><span class="dl">'</span><span class="p">);</span>
                <span class="nx">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comment approved</span><span class="dl">'</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="na">onError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="c1">// 失敗時の副作用をここに記述</span>
                <span class="nx">notify</span><span class="p">(</span><span class="s2">`Comment approval error: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span> <span class="p">});</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">);</span>
    
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Approve"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">approve</span><span class="p">()</span><span class="si">}</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">isLoading</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>React-adminは、最も一般的な副作用を処理するために次のフックを提供します:</p>

<ul>
  <li><a href="./useNotify.md"><code class="language-plaintext highlighter-rouge">useNotify</code></a>: 通知を表示する関数を返します。</li>
  <li><a href="./useRedirect.md"><code class="language-plaintext highlighter-rouge">useRedirect</code></a>: ユーザーを別のページにリダイレクトする関数を返します。</li>
  <li><a href="./useRefresh.md"><code class="language-plaintext highlighter-rouge">useRefresh</code></a>: 現在のビューを強制的に再レンダリングする関数を返します（リフレッシュボタンを押すのと同等）。</li>
  <li><a href="./useUnselect.md"><code class="language-plaintext highlighter-rouge">useUnselect</code></a>: 渡されたIDに基づいて現在の<code class="language-plaintext highlighter-rouge">Datagrid</code>の行を選択解除する関数を返します。</li>
  <li><a href="./useUnselectAll.md"><code class="language-plaintext highlighter-rouge">useUnselectAll</code></a>: 現在の<code class="language-plaintext highlighter-rouge">Datagrid</code>のすべての行を選択解除する関数を返します。</li>
</ul>

<h2 id="楽観的レンダリングとアンドゥ">楽観的レンダリングとアンドゥ</h2>

<p>次の例では、”Approve”ボタンをクリックした後、データプロバイダーがフェッチされている間にローディングスピナーが表示されます。その後、ユーザーはコメントリストにリダイレクトされます。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useUpdate</span><span class="p">,</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRedirect</span><span class="p">,</span> <span class="nx">useRecordContext</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ApproveButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nx">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nx">useRedirect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">approve</span><span class="p">,</span> <span class="p">{</span> <span class="nx">isLoading</span> <span class="p">}]</span> <span class="o">=</span> <span class="nx">useUpdate</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">isApproved</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">onSuccess</span><span class="p">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/comments</span><span class="dl">'</span><span class="p">);</span>
                <span class="nx">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comment approved</span><span class="dl">'</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="na">onError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">notify</span><span class="p">(</span><span class="s2">`Comment approval error: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span> <span class="p">});</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">);</span>
    
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Approve"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">approve</span><span class="p">()</span><span class="si">}</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">isLoading</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>しかし、ほとんどの場合、サーバーは成功応答を返すため、ユーザーはこの応答を待つ必要がありません。</p>

<p>これは<strong>悲観的レンダリング</strong>と呼ばれ、すべてのユーザーがサーバーの障害の可能性があるために待たされることになります。</p>

<p>ミューテーションのもう一つのモードは<strong>楽観的レンダリング</strong>です。このアイデアは、クライアント側で最初に<code class="language-plaintext highlighter-rouge">dataProvider</code>への呼び出しを処理し（つまり、react-queryキャッシュ内のエンティティを更新）、画面を即座に再レンダリングすることです。ユーザーは遅延なしでアクションの効果を見ることができます。その後、react-adminは成功の副作用を適用し、その後のみ<code class="language-plaintext highlighter-rouge">dataProvider</code>への呼び出しをトリガーします。フェッチが成功すると、react-adminはサーバーから最新のデータを取得するためにリフレッシュするだけです。ほとんどの場合、ユーザーは違いを感じません（react-queryキャッシュ内のデータと<code class="language-plaintext highlighter-rouge">dataProvider</code>からのデータは同じです）。フェッチが失敗すると、react-adminはエラー通知を表示し、ミューテーションを元に戻します。</p>

<p>三つ目のミューテーションモードは<strong>アンドゥ可能</strong>です。これは楽観的レンダリングと似ていますが、追加の機能があります。ローカルで変更と副作用を適用した後、react-adminは<code class="language-plaintext highlighter-rouge">dataProvider</code>への呼び出しをトリガーする前に数秒間待ちます。この遅延中、エンドユーザーはアクションをキャンセルするための「アンドゥ」ボタンを見ることができ、クリックすると<code class="language-plaintext highlighter-rouge">dataProvider</code>への呼び出しがキャンセルされ、画面がリフレッシュされます。</p>

<p>以下は三つのミューテーションモードのクイックリキャップです:</p>

<table>
  <thead>
    <tr>
      <th>悲観的</th>
      <th>楽観的</th>
      <th>アンドゥ可能</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dataProvider呼び出し</td>
      <td>即座に</td>
      <td>即座に</td>
      <td>遅延</td>
    </tr>
    <tr>
      <td>ローカル変更</td>
      <td>dataProviderが返るとき</td>
      <td>即座に</td>
      <td>即座に</td>
    </tr>
    <tr>
      <td>副作用</td>
      <td>dataProviderが返るとき</td>
      <td>即座に</td>
      <td>即座に</td>
    </tr>
    <tr>
      <td>キャンセル可能</td>
      <td>いいえ</td>
      <td>いいえ</td>
      <td>はい</td>
    </tr>
  </tbody>
</table>

<p>デフォルトでは、react-adminはEditビューに<code class="language-plaintext highlighter-rouge">undoable</code>モードを使用します。データプロバイダーメソッドフックの場合、デフォルトは<code class="language-plaintext highlighter-rouge">悲観的</code>モードです。</p>

<p><strong>ヒント</strong>: Createビューでは、リソースのIDを知ってリダイレクトする必要があるため、ミューテーションモードは悲観的です。</p>

<p><code class="language-plaintext highlighter-rouge">useUpdate</code>フックを呼び出すときにも楽観的およびアンドゥ可能なモードを活用できます。<code class="language-plaintext highlighter-rouge">mutationMode</code>オプションを渡すだけです:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">import * as React from 'react';
import { useUpdate, useNotify, useRedirect, useRecordContext, Button } from 'react-admin';
</span>
const ApproveButton = () =&gt; {
    const record = useRecordContext();
    const notify = useNotify();
    const redirect = useRedirect();
    const [approve, { isLoading }] = useUpdate(
        'comments',
        { id: record.id, data: { isApproved: true } }
        {
<span class="gi">+           mutationMode: 'undoable',
</span><span class="gd">-           onSuccess: (data) =&gt; {
</span><span class="gi">+           onSuccess: () =&gt; {
</span>                redirect('/comments');
<span class="gd">-               notify('Comment approved');
</span><span class="gi">+               notify('Comment approved', { undoable: true });
</span>            },
            onError: (error) =&gt; notify(`Error: ${error.message}`, { type: 'error' }),
        }
    );
    return &lt;Button label="Approve" onClick={() =&gt; approve()} disabled={isLoading} /&gt;;
<span class="err">};</span>
</code></pre></div></div>

<p>この例に示すように、アンドゥ可能な呼び出しの場合、通知を微調整する必要があります。<code class="language-plaintext highlighter-rouge">undo: true</code>を渡すと、通知に「アンドゥ」ボタンが表示されます。また、副作用は即座に実行されるため、成功応答に依存することはできません。</p>

<p>次のフックは<code class="language-plaintext highlighter-rouge">mutationMode</code>オプションを受け入れます:</p>

<ul>
  <li><a href="./useUpdate.md"><code class="language-plaintext highlighter-rouge">useUpdate</code></a></li>
  <li><a href="./useUpdateMany.md"><code class="language-plaintext highlighter-rouge">useUpdateMany</code></a></li>
  <li><a href="./useDelete.md"><code class="language-plaintext highlighter-rouge">useDelete</code></a></li>
  <li><a href="./useDeleteMany.md"><code class="language-plaintext highlighter-rouge">useDeleteMany</code></a></li>
</ul>

<h2 id="fetchを使用したapiクエリの実行"><code class="language-plaintext highlighter-rouge">fetch</code>を使用したAPIクエリの実行</h2>

<p>データプロバイダーメソッドフックはAPIにクエリを実行するための「react-adminの方法」です。しかし、必要に応じて<code class="language-plaintext highlighter-rouge">fetch</code>を使用することも可能です。例えば、APIのRPCメソッドに対してルーティングロジックを追加したくない場合は、その方が理にかなっています。</p>

<p>その場合、特別なreact-adminのソースはありません。コンポーネント内で<code class="language-plaintext highlighter-rouge">fetch</code>を呼び出す例の実装を示します:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/comments/ApproveButton.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRedirect</span><span class="p">,</span> <span class="nx">useRecordContext</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ApproveButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">useRecordContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nx">useRedirect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nx">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">updatedRecord</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">record</span><span class="p">,</span> <span class="na">is_approved</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
        <span class="nx">fetch</span><span class="p">(</span><span class="s2">`/comments/</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">updatedRecord</span> <span class="p">})</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comment approved</span><span class="dl">'</span><span class="p">);</span>
                <span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/comments</span><span class="dl">'</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error: comment not approved</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span> <span class="p">})</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
            <span class="p">});</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Approve"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleClick</span><span class="si">}</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">loading</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ApproveButton</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>ヒント</strong>: APIは認証、クエリパラメータ、エンコーディング、ヘッダーなどに対処するためのHTTPのプラミングを必要とすることがよくあります。RESTリクエストをHTTPリクエストにマッピングする関数をすでに持っている可能性があります。それがあなたの<a href="./DataProviders.md">Data Provider</a>です。そのため、<code class="language-plaintext highlighter-rouge">fetch</code>の代わりに<code class="language-plaintext highlighter-rouge">useDataProvider</code>を使用する方が良いことがよくあります。</p>


                        </div>
                    </div>
                    <div class="col hide-on-small-only m3 toc-container">
                        <div class="toc"></div>
                    </div>
                </div>
            </div>
        </main>

        <script src="/js/materialize.min.js"></script>
        <script src="/js/prism.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.min.js"
            defer
            integrity="sha512-oD3xGN8YTxenx6tdS4D/RKqO4OtORBQtAb2/FseM17GGMIi6jMwKUBc8duX4A5RwMOGGXoFBZrsqbOk8GpXFgQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script src="/js/ra-doc-exec.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
        
        <script type="text/javascript">
            docsearch({
                container: '#docsearch',
                appId: 'QY9T9CVM2N',
                indexName: 'marmelab-react-admin',
                apiKey: '75332227370be3dc35777cee6244881a',
                searchParameters: { facetFilters: ['version:  latest'] },
            });
        </script>

        <!--
        React-admin protects your privacy!
        We use our own self-hosted tracking solution to collect some raw metrics,
        like page views, device type (mobile, desktop, etc.) or country.
        We don't track any personal information about our visitors.
    -->
        <script
            async
            defer
            data-website-id="ef7f8242-2808-4cbf-9dff-564daa515bbd"
            src="https://analytics.marmelab.com/umami.js"
        ></script>

        <!-- Newsletter form -->
        <script>
            window.REQUIRED_CODE_ERROR_MESSAGE = 'Please choose a country code';
            window.LOCALE = 'en';
            window.GENERIC_INVALID_MESSAGE = window.EMAIL_INVALID_MESSAGE = window.SMS_INVALID_MESSAGE =
                'The information provided is invalid. Please review the field format and try again.';
            window.REQUIRED_ERROR_MESSAGE = 'This field is required.';

            var AUTOHIDE = Boolean(0);
        </script>

        <script
            async
            defer
            src="https://unpkg.com/typescript@5.1.3/lib/typescript.js"
        ></script>
        <script
            async
            defer
            src="https://unpkg.com/prettier@2.8.8/standalone.js"
        ></script>
        <script
            async
            defer
            src="https://unpkg.com/prettier@2.8.8/parser-babel.js"
        ></script>
    </body>
</html>
