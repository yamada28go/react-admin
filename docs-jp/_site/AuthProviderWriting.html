<!DOCTYPE html>
<html lang="en-US">
    <head>
        <title>React-admin - Authプロバイダーの作成</title>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
        <meta name="description" content="" />
        <meta name="HandheldFriendly" content="true" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <link
            rel="canonical"
            href="/AuthProviderWriting.html"
        />
        <link
            rel="stylesheet"
            href="/css/materialize.min.css"
        />
        <link
            rel="stylesheet"
            href="/css/style-v19.css"
        />
        <link rel="stylesheet" href="/css/syntax.css" />
        <link rel="stylesheet" href="/css/prism.css" />
        <link rel="stylesheet" href="/css/tocbot.css" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/icon?family=Material+Icons"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.css"
            integrity="sha512-2kqK5bWDwdrluTn6Wkj+jgiwyzvAHLirVp08Kz7kN5I8PWQ0tUtEMxfhyWDCrnws91BJ9PfrUy6ImfA7Qb22TA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <link
            rel="stylesheet"
            href="/css/docsearch.css"
        />
        <!-- Newsletter form -->
        <style>
            @font-face {
                font-display: block;
                font-family: Roboto;
                src: url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/7529907e9eaf8ebb5220c5f9850e3811.woff2)
                        format('woff2'),
                    url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/25c678feafdc175a70922a116c9be3e7.woff)
                        format('woff');
            }

            @font-face {
                font-display: fallback;
                font-family: Roboto;
                font-weight: 600;
                src: url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/6e9caeeafb1f3491be3e32744bc30440.woff2)
                        format('woff2'),
                    url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/71501f0d8d5aa95960f6475d5487d4c2.woff)
                        format('woff');
            }

            @font-face {
                font-display: fallback;
                font-family: Roboto;
                font-weight: 700;
                src: url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/3ef7cf158f310cf752d5ad08cd0e7e60.woff2)
                        format('woff2'),
                    url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/ece3a1d82f18b60bcce0211725c476aa.woff)
                        format('woff');
            }

            #sib-container input:-ms-input-placeholder {
                text-align: left;
                font-family: 'Helvetica', sans-serif;
                color: #c0ccda;
            }

            #sib-container input::placeholder {
                text-align: left;
                font-family: 'Helvetica', sans-serif;
                color: #c0ccda;
            }

            #sib-container textarea::placeholder {
                text-align: left;
                font-family: 'Helvetica', sans-serif;
                color: #c0ccda;
            }
        </style>
        <link
            rel="stylesheet"
            href="/css/newsletter.css"
        />
    </head>

    <body>
        <header>
            <nav>
    <a href="#" data-target="slide-out" class="sidenav-trigger">
        <i class="material-icons">&#xe5d2;</i>
    </a>
    <div class="nav-wrapper">
        <div class="left react-admin-logo">
            <a href=""> <svg version="1.0" x="0px" y="0px" preserveAspectRatio="xMidYMid meet" viewBox="0 0 130 130" >
<style type="text/css">
	:root{
		--color: #ffffff;
	}
	.st0{opacity:0.3;}
	.st2{opacity:0.6;}
	.st1{fill: var(--color);}
</style>
<g id="layer3Fill" class="st0">
	<polygon class="st1" points="67.4,117.7 81.3,125.7 88.7,112.9 75.7,112.9 	"/>
	<polygon class="st1" points="12.3,67.5 4.4,81.2 17.2,88.6 17.2,76 	"/>
	<polygon class="st1" points="62.6,12.3 48.8,4.3 41.4,17.1 54.2,17.1 	"/>
	<polygon class="st1" points="117.7,62.6 125.7,48.8 112.8,41.3 112.8,54.1 	"/>
</g>
<g id="layer3Border" class="st2">
	<path class="st1" d="M39.2,17.1c0.5,0,1.7,0,2.2,0l7.4-12.8l13.8,8l1.9-1.1L48.1,1.7L39.2,17.1z"/>
	<path class="st1" d="M112.8,39.1c0,0.5,0,1.7,0,2.2l12.9,7.5l-8,13.8c0.3,0.5,0.8,1.5,1.1,2l9.5-16.5L112.8,39.1z"/>
	<path class="st1" d="M88.7,112.9l-7.4,12.8l-13.9-8l-1.9,1.1l16.5,9.5l8.9-15.4C90.4,112.9,89.2,112.9,88.7,112.9z"/>
	<path class="st1" d="M12.3,67.5c-0.3-0.5-0.8-1.4-1.1-1.9L1.8,82l15.4,8.9c0-0.6,0-1.7,0-2.3L4.4,81.2L12.3,67.5z"/>
</g>
<g id="layer2Fill" class="st2">
	<polygon class="st1" points="41.9,112.9 48.9,125.1 70.1,112.9 	"/>
	<polygon class="st1" points="17.2,70.1 17.2,41.9 5,49 	"/>
	<polygon class="st1" points="60.1,17.1 88.1,17.1 81.1,5 	"/>
	<polygon class="st1" points="112.8,60 112.8,88.2 125,81.1 	"/>
</g>
<g id="layer2Border">
	<polygon class="st1" points="17.2,76 17.2,70.1 5,49 17.2,41.9 17.2,38.5 1,47.9 	"/>
	<path class="st1" d="M54.2,17.1h5.9c0,0,19.9-11.5,21-12.1l7,12.1c0.8,0,2.5,0,3.3,0L82.1,1L54.2,17.1z"/>
	<polygon class="st1" points="112.8,54.1 112.8,60 125,81.1 112.8,88.2 112.8,91.5 129,82.2 	"/>
	<path class="st1" d="M48.9,125.1l-7-12.2c-0.8,0-2.6,0-3.4,0l9.3,16.1c6.7-3.9,21.4-12.3,27.9-16.1c-1.4,0-5.6,0-5.6,0L48.9,125.1z
		"/>
</g>
<path id="raBorder" class="st1" d="M17,17v96h96V17H17z M108,108H22V22h86V108z"/>
<g id="ra">
	<path id="aLetter" class="st1" d="M96.1,55.4c-0.7-1.9-2-3.2-3.7-4c-1.9-0.8-4.6-1.2-8.2-1.2c-4.2,0-7.9,0.3-11.1,1v4.2
		c1.2-0.2,2.7-0.4,4.7-0.5c1.9-0.1,3.5-0.2,4.8-0.2c2.9,0,5,0.2,6.2,0.5c1.3,0.4,2.1,1.2,2.5,2.3c0.5,1.2,0.7,3.2,0.7,6.1V66
		c-6.2-0.2-9.9-0.3-11.1-0.3c-2.5,0-4.5,0.3-5.9,1c-1.4,0.7-2.3,1.8-2.9,3.2c-0.6,1.4-0.9,3.5-0.9,6.2c0,3.9,0.9,6.5,2.4,8
		c1.7,1.5,4.2,2.1,7.8,2.1c2.4,0,4.6-0.4,6.4-1.1c1.9-0.7,3.2-2.1,4-4.3h0.3l0.3,4.9h4.7v-22C97.1,60,96.8,57.3,96.1,55.4z M92,71.6
		c0,2.9-0.4,5.4-1.3,7.1c-0.6,1.2-1.6,2-2.7,2.3c-1.3,0.4-2.8,0.6-4.7,0.8c-2,0-3.4-0.2-4.4-0.5c-0.9-0.4-1.6-1-2-1.8
		c-0.4-0.8-0.6-2.1-0.6-3.8s0.2-3,0.5-3.9c0.3-0.9,0.9-1.5,1.7-1.8s2.1-0.5,3.7-0.5H92V71.6z"/>
	<path id="rLetter" class="st1" d="M62.4,61.2c0.9-2.2,1.3-5.1,1.3-8.5c0-3.1-0.3-5.7-0.8-7.6c-0.5-2-1.7-3.5-3.4-4.7
		c-1.8-1.2-4.4-1.8-7.9-1.8H33.5v47.1H39V67h11.9h1.2l6.5,18.8h5.9L57.3,66C59.9,65,61.6,63.4,62.4,61.2z M55.4,61.2
		c-1.3,0.7-3.1,1-5.6,1H39V43.5h11.2c2.4,0,4.2,0.3,5.4,1c1.2,0.7,2,1.6,2.2,2.8c0.3,1.3,0.5,3,0.5,5.5c0,2.3-0.2,4.2-0.6,5.5
		C57.3,59.5,56.6,60.5,55.4,61.2z"/>
</g>
</svg>
 </a>
        </div>
        <div class="left">
            <div id="docsearch" class="center"></div>
        </div>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li class="active">
                <a href="/documentation.html">Documentation</a>
            </li>
            <li>
                <a href="/Demos.html">Demos</a>
            </li>
            <li>
                <a href="https://marmelab.com/en/blog/#react-admin">Blog</a>
            </li>
            <li>
                <a
                    href="https://marmelab.com/ra-enterprise/"
                    style="color: #f0c070"
                    >Enterprise Edition</a
                >
            </li>
            <li>
                <a
                    href="https://github.com/marmelab/react-admin"
                    title="GitHub"
                >
                    <svg
                        viewBox="0 0 256 250"
                        preserveAspectRatio="xMidYMid"
                        style="
                            height: 20px;
                            vertical-align: middle;
                            fill: #ffffff;
                        "
                    >
                        <path
                            d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403z"
                        ></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://discord.gg/GeZF9sqh3N" title="Discord">
                    <svg
                        height="25px"
                        width="25px"
                        viewBox="0 -28.5 256 256"
                        preserveAspectRatio="xMidYMid"
                        style="
                            height: 20px;
                            vertical-align: middle;
                            margin-right: 10px;
                            fill: #ffffff;
                        "
                    >
                        <path
                            d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z"
                        ></path>
                    </svg>
                </a>
            </li>
        </ul>
    </div>
</nav>

            <ul id="slide-out" class="sidenav sidenav-fixed">
                <li class="logo">
                    <a href=""
                        ><img src="/assets/logo_white.png"
                    /></a>
                </li>
                <li class="version">
<a class="dropdown-trigger" href="#" data-target="versions">
    
    
    
    <svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 10l5 5 5-5z"></path>
        <path d="M0 0h24v24H0z" fill="none"></path>
    </svg>
</a>
<ul id="versions" class="dropdown-content">
    
</ul>
</li>
                <a class="center-align switch" style="display:block;margin-bottom: 1em" name="beginner-mode" title="Hide the sections concerning advanced usage to navigate more easily in the documentation">
<label>
  <input type="checkbox" name="beginner-mode-trigger" id="beginner-mode-trigger" />
  <span class="lever"></span>
  Beginner Mode
</label>
</a>

<ul><div>Getting Started</div>
  <li  class="beginner" ><a class="nav-link" href="./Tutorial.html">Tutorial</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Features.html">Features</a></li>
  <li ><a class="nav-link" href="./Architecture.html">Key concepts</a></li>
  <li><a class="nav-link external" href="https://github.com/marmelab/react-admin/releases" target="_blank">What's new?</a></li>
  <li  class="beginner" ><a class="nav-link" href="./CreateReactAdmin.html">Create React Admin</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Vite.html">Vite</a></li>
  <li ><a class="nav-link" href="./NextJs.html">Next.js</a></li>
  <li ><a class="nav-link" href="./Remix.html">Remix</a></li>
  <li ><a class="nav-link" href="./CreateReactApp.html">Create React App</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Community.html">Community</a></li>
  <li ><a class="nav-link" href="./Upgrade.html">Upgrading to v4</a></li>
</ul>

<ul><div>App Configuration</div>
  <li  class="beginner" ><a class="nav-link" href="./Admin.html"><code>&lt;Admin&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Resource.html"><code>&lt;Resource&gt;</code></a></li>
  <li ><a class="nav-link" href="./CustomRoutes.html"><code>&lt;CustomRoutes&gt;</code></a></li>
</ul>

<ul><div>Data Fetching</div>
  <li  class="beginner" ><a class="nav-link" href="./DataProviders.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./DataProviderList.html">Supported backends</a></li>
  <li ><a class="nav-link" href="./DataProviderWriting.html">Writing A Data Provider</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Actions.html">Querying the API</a></li>
  <li ><a class="nav-link" href="./DataProviderLive.html">Real-time Updates &amp; Locks<img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useDataProvider.html"><code>useDataProvider</code></a></li>
  <li ><a class="nav-link" href="./useGetList.html"><code>useGetList</code></a></li>
  <li ><a class="nav-link" href="./useInfiniteGetList.html"><code>useInfiniteGetList</code></a></li>
  <li ><a class="nav-link" href="./useGetOne.html"><code>useGetOne</code></a></li>
  <li ><a class="nav-link" href="./useGetMany.html"><code>useGetMany</code></a></li>
  <li ><a class="nav-link" href="./useGetManyReference.html"><code>useGetManyReference</code></a></li>
  <li ><a class="nav-link" href="./useCreate.html"><code>useCreate</code></a></li>
  <li ><a class="nav-link" href="./useUpdate.html"><code>useUpdate</code></a></li>
  <li ><a class="nav-link" href="./useUpdateMany.html"><code>useUpdateMany</code></a></li>
  <li ><a class="nav-link" href="./useDelete.html"><code>useDelete</code></a></li>
  <li ><a class="nav-link" href="./useDeleteMany.html"><code>useDeleteMany</code></a></li>
  <li ><a class="nav-link" href="./useGetTree.html"><code>useGetTree</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./withLifecycleCallbacks.html"><code>withLifecycleCallbacks</code></a></li>
  <li ><a class="nav-link" href="./fetchJson.html"><code>fetchJson</code></a></li>
</ul>

<ul><div>Security</div>
  <li  class="beginner" ><a class="nav-link" href="./Authentication.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./AuthProviderList.html">Supported backends</a></li>
  <li  class="active beginner" ><a class="nav-link" href="./AuthProviderWriting.html">Writing An Auth Provider</a></li>
  <li ><a class="nav-link" href="./Permissions.html">Permissions</a></li>
  <li ><a class="nav-link" href="./AuthRBAC.html">RBAC<img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Authenticated.html"><code>&lt;Authenticated&gt;</code></a></li>
  <li ><a class="nav-link" href="./IfCanAccess.html"><code>&lt;IfCanAccess&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./WithPermissions.html"><code>&lt;WithPermissions&gt;</code></a></li>
  <li ><a class="nav-link" href="./useAuthProvider.html"><code>useAuthProvider</code></a></li>
  <li ><a class="nav-link" href="./useAuthenticated.html"><code>useAuthenticated</code></a></li>
  <li ><a class="nav-link" href="./useAuthState.html"><code>useAuthState</code></a></li>
  <li ><a class="nav-link" href="./useGetIdentity.html"><code>useGetIdentity</code></a></li>
  <li ><a class="nav-link" href="./useLogin.html"><code>useLogin</code></a></li>
  <li ><a class="nav-link" href="./useLogout.html"><code>useLogout</code></a></li>
  <li ><a class="nav-link" href="./usePermissions.html"><code>usePermissions</code></a></li>
  <li ><a class="nav-link" href="./useCanAccess.html"><code>useCanAccess</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./canAccess.html"><code>canAccess</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./addRefreshAuthToAuthProvider.html"><code>addRefreshAuthToAuthProvider</code></a></li>
  <li ><a class="nav-link" href="./addRefreshAuthToDataProvider.html"><code>addRefreshAuthToDataProvider</code></a></li>
</ul>

<ul><div>List Page</div>
  <li  class="beginner" ><a class="nav-link" href="./ListTutorial.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./FilteringTutorial.html">Filtering The List</a></li>
  <li  class="beginner" ><a class="nav-link" href="./List.html"><code>&lt;List&gt;</code></a></li>
  <li ><a class="nav-link" href="./ListBase.html"><code>&lt;ListBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ListGuesser.html"><code>&lt;ListGuesser&gt;</code></a></li>
  <li ><a class="nav-link" href="./InfiniteList.html"><code>&lt;InfiniteList&gt;</code></a></li>
  <li ><a class="nav-link" href="./TreeWithDetails.html"><code>&lt;TreeWithDetails&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Datagrid.html"><code>&lt;Datagrid&gt;</code></a></li>
  <li ><a class="nav-link" href="./DatagridAG.html"><code>&lt;DatagridAG&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleList.html"><code>&lt;SimpleList&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SingleFieldList.html"><code>&lt;SingleFieldList&gt;</code></a></li>
  <li ><a class="nav-link" href="./EditableDatagrid.html"><code>&lt;EditableDatagrid&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Calendar.html"><code>&lt;Calendar&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./FilterButton.html"><code>&lt;FilterButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./FilterList.html"><code>&lt;FilterList&gt;</code></a></li>
  <li ><a class="nav-link" href="./FilterLiveSearch.html"><code>&lt;FilterLiveSearch&gt;</code></a></li>
  <li ><a class="nav-link" href="./SavedQueriesList.html"><code>&lt;SavedQueriesList&gt;</code></a></li>
  <li ><a class="nav-link" href="./StackedFilters.html"><code>&lt;StackedFilters&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Pagination.html"><code>&lt;Pagination&gt;</code></a></li>
  <li ><a class="nav-link" href="./SortButton.html"><code>&lt;SortButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./SelectColumnsButton.html"><code>&lt;SelectColumnsButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./Count.html"><code>&lt;Count&gt;</code></a></li>
  <li ><a class="nav-link" href="./WithListContext.html"><code>&lt;WithListContext&gt;</code></a></li>
  <li ><a class="nav-link" href="./useListContext.html"><code>useListContext</code></a></li>
  <li ><a class="nav-link" href="./useList.html"><code>useList</code></a></li>
  <li ><a class="nav-link" href="./useListController.html"><code>useListController</code></a></li>
  <li ><a class="nav-link" href="./useUnselect.html"><code>useUnselect</code></a></li>
  <li ><a class="nav-link" href="./useUnselectAll.html"><code>useUnselectAll</code></a></li>
</ul>

<ul><div>Creation & Edition Pages</div>
  <li  class="beginner" ><a class="nav-link" href="./EditTutorial.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Validation.html">Form Validation</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Create.html"><code>&lt;Create&gt;</code></a></li>
  <li ><a class="nav-link" href="./CreateBase.html"><code>&lt;CreateBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Edit.html"><code>&lt;Edit&gt;</code></a></li>
  <li ><a class="nav-link" href="./EditBase.html"><code>&lt;EditBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./EditGuesser.html"><code>&lt;EditGuesser&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleForm.html"><code>&lt;SimpleForm&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TabbedForm.html"><code>&lt;TabbedForm&gt;</code></a></li>
  <li ><a class="nav-link" href="./Form.html"><code>&lt;Form&gt;</code></a></li>
  <li ><a class="nav-link" href="./LongForm.html"><code>&lt;LongForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./AccordionForm.html"><code>&lt;AccordionForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./WizardForm.html"><code>&lt;WizardForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./EditDialog.html"><code>&lt;EditDialog&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./EditInDialogButton.html"><code>&lt;EditInDialogButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./CreateDialog.html"><code>&lt;CreateDialog&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./CreateInDialogButton.html"><code>&lt;CreateInDialogButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./JsonSchemaForm.html"><code>&lt;JsonSchemaForm&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Toolbar.html"><code>&lt;Toolbar&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SaveButton.html"><code>&lt;SaveButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./AutoSave.html"><code>&lt;AutoSave&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useCreateContext.html"><code>useCreateContext</code></a></li>
  <li ><a class="nav-link" href="./useCreateController.html"><code>useCreateController</code></a></li>
  <li ><a class="nav-link" href="./useEditContext.html"><code>useEditContext</code></a></li>
  <li ><a class="nav-link" href="./useEditController.html"><code>useEditController</code></a></li>
  <li ><a class="nav-link" href="./useSaveContext.html"><code>useSaveContext</code></a></li>
  <li ><a class="nav-link" href="./useRegisterMutationMiddleware.html"><code>useRegisterMutationMiddleware</code></a></li>
  <li ><a class="nav-link" href="./useUnique.html"><code>useUnique</code></a></li>
</ul>

<ul><div>Show Page</div>
  <li  class="beginner" ><a class="nav-link" href="./ShowTutorial.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./Show.html"><code>&lt;Show&gt;</code></a></li>
  <li ><a class="nav-link" href="./ShowBase.html"><code>&lt;ShowBase&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ShowGuesser.html"><code>&lt;ShowGuesser&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleShowLayout.html"><code>&lt;SimpleShowLayout&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TabbedShowLayout.html"><code>&lt;TabbedShowLayout&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Labeled.html"><code>&lt;Labeled&gt;</code></a></li>
  <li ><a class="nav-link" href="./ShowInDialogButton.html"><code>&lt;ShowInDialogButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useShowContext.html"><code>useShowContext</code></a></li>
  <li ><a class="nav-link" href="./useShowController.html"><code>useShowController</code></a></li>
</ul>

<ul><div>Common</div>
  <li  class="beginner" ><a class="nav-link" href="./WithRecord.html"><code>&lt;WithRecord&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./useRecordContext.html"><code>useRecordContext</code></a></li>
  <li ><a class="nav-link" href="./useGetRecordId.html"><code>useGetRecordId</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./useNotify.html"><code>useNotify</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./useRedirect.html"><code>useRedirect</code></a></li>
  <li ><a class="nav-link" href="./useRefresh.html"><code>useRefresh</code></a></li>
</ul>

<ul><div>Fields</div>
  <li  class="beginner" ><a class="nav-link" href="./Fields.html">Introduction</a></li>
  <li ><a class="nav-link" href="./FieldsForRelationships.html">Fields for Relationships</a></li>
  <li  class="beginner" ><a class="nav-link" href="./ArrayField.html"><code>&lt;ArrayField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./BooleanField.html"><code>&lt;BooleanField&gt;</code></a></li>
  <li ><a class="nav-link" href="./ChipField.html"><code>&lt;ChipField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./DateField.html"><code>&lt;DateField&gt;</code></a></li>
  <li ><a class="nav-link" href="./EmailField.html"><code>&lt;EmailField&gt;</code></a></li>
  <li ><a class="nav-link" href="./FileField.html"><code>&lt;FileField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./FunctionField.html"><code>&lt;FunctionField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ImageField.html"><code>&lt;ImageField&gt;</code></a></li>
  <li ><a class="nav-link" href="./MarkdownField.html"><code>&lt;MarkdownField&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./NumberField.html"><code>&lt;NumberField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceField.html"><code>&lt;ReferenceField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceArrayField.html"><code>&lt;ReferenceArrayField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceManyField.html"><code>&lt;ReferenceManyField&gt;</code></a></li>
  <li ><a class="nav-link" href="./ReferenceManyCount.html"><code>&lt;ReferenceManyCount&gt;</code></a></li>
  <li ><a class="nav-link" href="./ReferenceManyToManyField.html"><code>&lt;ReferenceManyToManyField&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceOneField.html"><code>&lt;ReferenceOneField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./RichTextField.html"><code>&lt;RichTextField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SelectField.html"><code>&lt;SelectField&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TextField.html"><code>&lt;TextField&gt;</code></a></li>
  <li ><a class="nav-link" href="./TranslatableFields.html"><code>&lt;TranslatableFields&gt;</code></a></li>
  <li ><a class="nav-link" href="./UrlField.html"><code>&lt;UrlField&gt;</code></a></li>
  <li ><a class="nav-link" href="./WrapperField.html"><code>&lt;WrapperField&gt;</code></a></li>
</ul>

<ul><div>Inputs</div>
  <li  class="beginner" ><a class="nav-link" href="./Inputs.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./ArrayInput.html"><code>&lt;ArrayInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./AutocompleteInput.html"><code>&lt;AutocompleteInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./AutocompleteArrayInput.html"><code>&lt;AutocompleteArrayInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./BooleanInput.html"><code>&lt;BooleanInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./CheckboxGroupInput.html"><code>&lt;CheckboxGroupInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./DateInput.html"><code>&lt;DateInput></code></a></li>
  <li ><a class="nav-link" href="./DateTimeInput.html"><code>&lt;DateTimeInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./DualListInput.html"><code>&lt;DualListInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./FileInput.html"><code>&lt;FileInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./ImageInput.html"><code>&lt;ImageInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./MarkdownInput.html"><code>&lt;MarkdownInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./NullableBooleanInput.html"><code>&lt;NullableBooleanInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./NumberInput.html"><code>&lt;NumberInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./PasswordInput.html"><code>&lt;PasswordInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./PredictiveTextInput.html"><code>&lt;PredictiveTextInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./RadioButtonGroupInput.html"><code>&lt;RadioButtonGroupInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceInput.html"><code>&lt;ReferenceInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./ReferenceArrayInput.html"><code>&lt;ReferenceArrayInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./ReferenceManyInput.html"><code>&lt;ReferenceManyInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceManyToManyInput.html"><code>&lt;ReferenceManyToManyInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceNodeInput.html"><code>&lt;ReferenceNodeInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ReferenceOneInput.html"><code>&lt;ReferenceOneInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./RichTextInput.html"><code>&lt;RichTextInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SearchInput.html"><code>&lt;SearchInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SelectInput.html"><code>&lt;SelectInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SelectArrayInput.html"><code>&lt;SelectArrayInput&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./SimpleFormIterator.html"><code>&lt;SimpleFormIterator&gt;</code></a></li>
  <li ><a class="nav-link" href="./SmartRichTextInput.html"><code>&lt;SmartRichTextInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./TextInput.html"><code>&lt;TextInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./TimeInput.html"><code>&lt;TimeInput&gt;</code></a></li>
  <li ><a class="nav-link" href="./TranslatableInputs.html"><code>&lt;TranslatableInputs&gt;</code></a></li>
  <li ><a class="nav-link" href="./TreeInput.html"><code>&lt;TreeInput&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useInput.html"><code>useInput</code></a></li>
</ul>

<ul><div>Preferences</div>
  <li ><a class="nav-link" href="./Store.html">Introduction</a></li>
  <li ><a class="nav-link" href="./useStore.html"><code>useStore</code></a></li>
  <li ><a class="nav-link" href="./useRemoveFromStore.html"><code>useRemoveFromStore</code></a></li>
  <li ><a class="nav-link" href="./useResetStore.html"><code>useResetStore</code></a></li>
  <li ><a class="nav-link" href="./useStoreContext.html"><code>useStoreContext</code></a></li>
  <li ><a class="nav-link" href="./Configurable.html"><code>&lt;Configurable&gt;</code></a></li>
</ul>

<ul><div>I18N Provider and Translations</div>
  <li ><a class="nav-link" href="./Translation.html">Introduction</a></li>
  <li ><a class="nav-link" href="./TranslationSetup.html">Setting Up</a></li>
  <li ><a class="nav-link" href="./TranslationLocales.html">Supported Locales</a></li>
  <li ><a class="nav-link" href="./TranslationTranslating.html">Translating UI Components</a></li>
  <li ><a class="nav-link" href="./TranslationWriting.html">Writing an i18nProvider</a></li>
  <li ><a class="nav-link" href="./useTranslate.html"><code>useTranslate</code></a></li>
  <li ><a class="nav-link" href="./useLocaleState.html"><code>useLocaleState</code></a></li>
  <li ><a class="nav-link" href="./LocalesMenuButton.html"><code>&lt;LocalesMenuButton&gt;</code></a></li>
</ul>

<ul><div>Other UI components</div>
  <li  class="beginner" ><a class="nav-link" href="./Layout.html"><code>&lt;Layout&gt;</code></a></li>
  <li ><a class="nav-link" href="./ContainerLayout.html"><code>&lt;ContainerLayout&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./SolarLayout.html"><code>&lt;SolarLayout&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li  class="beginner" ><a class="nav-link" href="./AppBar.html"><code>&lt;AppBar&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Menu.html"><code>&lt;Menu&gt;</code></a></li>
  <li ><a class="nav-link" href="./MultiLevelMenu.html"><code>&lt;MultiLevelMenu&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./IconMenu.html"><code>&lt;IconMenu&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Title.html"><code>&lt;Title&gt;</code></a></li>
  <li ><a class="nav-link" href="./Breadcrumb.html"><code>&lt;Breadcrumb&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Search.html"><code>&lt;Search&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./SearchWithResult.html"><code>&lt;SearchWithResult&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./Confirm.html"><code>&lt;Confirm&gt;</code></a></li>
  <li  class="beginner" ><a class="nav-link" href="./Buttons.html">Buttons</a></li>
  <li ><a class="nav-link" href="./RevisionsButton.html"><code>&lt;RevisionsButton&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./CheckForApplicationUpdate.html"><code>&lt;CheckForApplicationUpdate&gt;</code></a></li>
  <li ><a class="nav-link" href="./UpdateButton.html"><code>&lt;UpdateButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./RecordRepresentation.html"><code>&lt;RecordRepresentation&gt;</code></a></li>
  <li ><a class="nav-link" href="./PrevNextButtons.html"><code>&lt;PrevNextButtons&gt;</code></a></li>
  <li ><a class="nav-link" href="./useDefineAppLocation.html"><code>useDefineAppLocation</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetRecordRepresentation.html"><code>useGetRecordRepresentation</code></a></li>
</ul>

<ul><div>Theming</div>
  <li  class="beginner" ><a class="nav-link" href="./Theming.html">Introduction</a></li>
  <li  class="beginner" ><a class="nav-link" href="./SX.html">The <code>sx</code> prop</a></li>
  <li  class="beginner" ><a class="nav-link" href="./AppTheme.html">Application Theme</a></li>
  <li ><a class="nav-link" href="./BoxStackGrid.html"><code>&lt;Box&gt;</code>, <code>&lt;Stack&gt;</code> and <code>&lt;Grid&gt;</code></a></li>
  <li ><a class="nav-link" href="./ToggleThemeButton.html"><code>&lt;ToggleThemeButton&gt;</code></a></li>
  <li ><a class="nav-link" href="./useMediaQuery.html"><code>useMediaQuery</code></a></li>
  <li ><a class="nav-link" href="./useTheme.html"><code>useTheme</code></a></li>
</ul>

<ul><div>Realtime</div>
  <li ><a class="nav-link" href="./Realtime.html">Introduction</a></li>
  <li ><a class="nav-link" href="./RealtimeDataProvider.html">Data Provider Requirements</a></li>
  <li ><a class="nav-link" href="./usePublish.html"><code>usePublish</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribe.html"><code>useSubscribe</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribeCallback.html"><code>useSubscribeCallback</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribeToRecord.html"><code>useSubscribeToRecord</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useSubscribeToRecordList.html"><code>useSubscribeToRecordList</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useLock.html"><code>useLock</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useUnlock.html"><code>useUnlock</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLock.html"><code>useGetLock</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLockLive.html"><code>useGetLockLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLocks.html"><code>useGetLocks</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetLocksLive.html"><code>useGetLocksLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useLockOnMount.html"><code>useLockOnMount</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useLockOnCall.html"><code>useLockOnCall</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetListLive.html"><code>useGetListLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./useGetOneLive.html"><code>useGetOneLive</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ListLive.html"><code>&lt;ListLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./EditLive.html"><code>&lt;EditLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./ShowLive.html"><code>&lt;ShowLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
  <li ><a class="nav-link" href="./MenuLive.html"><code>&lt;MenuLive&gt;</code><img class="premium" src="./img/premium.svg" /></a></li>
</ul>

<ul><div>Recipes</div>
  <li ><a class="nav-link" href="./Caching.html">Caching</a></li>
  <li ><a class="nav-link" href="./Routing.html">Routing</a></li>
  <li ><a class="nav-link" href="./UnitTesting.html">Unit Testing</a></li>
  <li ><a class="nav-link" href="./AdvancedTutorials.html">Advanced tutorials</a></li>
</ul>

<li ><a class="nav-link" href="./Ecosystem.html">Ecosystem</a></li>
<li ><a class="nav-link" href="./FAQ.html">FAQ</a></li>
<li  class="beginner" ><a class="nav-link" href="./Reference.html">Index</a></li>

<div class="beginner-mode-on" style="margin:1em;padding:1em;background:#ffffca;border-radius:4px;display:none;font-size:0.8em;opacity:0.8;text-align:center;">
  <a href="#beginner-mode">Beginner mode is on</a>. Turn it off to reveal more documentation for advanced components.
</div>

            </ul>
        </header>

        <main>
            <div class="container sticker-container">
                <div class="row">
                    <div class="col s12 m9">
                        <div
                            class="markdown-section DocSearch-content toc-content"
                        >
                            <h1 id="authプロバイダーの作成">Authプロバイダーの作成</h1>

<p>ここでは、<code class="language-plaintext highlighter-rouge">authProvider</code>オブジェクトがreact-adminによって期待されるインターフェースを示します。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">const</span> <span class="nx">authProvider</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">// 認証</span>
        <span class="na">login</span><span class="p">:</span> <span class="nx">params</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span>
        <span class="na">checkError</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span>
        <span class="na">checkAuth</span><span class="p">:</span> <span class="nx">params</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span>
        <span class="na">logout</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span>
        <span class="na">getIdentity</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span>
        <span class="na">handleCallback</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span> <span class="c1">// サードパーティの認証のみ</span>
        <span class="c1">// 認可</span>
        <span class="na">getPermissions</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">),</span>
    <span class="p">};</span>
</code></pre></div></div>

<p><strong>Tip</strong>: TypeScriptユーザーの場合、<code class="language-plaintext highlighter-rouge">AuthProvider</code>型を使用してコンパイル時に<code class="language-plaintext highlighter-rouge">authProvider</code>が正しいか確認できます。</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">AuthProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">authProvider</span><span class="p">:</span> <span class="nx">AuthProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="例">例</h2>

<p>ここでは、完全な例ですが架空のauthプロバイダーの実装を示します。これは”john”というユーザーと”123”というパスワードのみを受け付けます。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">authProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">username</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">john</span><span class="dl">'</span> <span class="o">||</span> <span class="nx">password</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">,</span> <span class="nx">username</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="na">logout</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">)</span> <span class="p">?</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span> <span class="p">:</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(),</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">401</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">403</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">// 他のエラーコード（404, 500など）：ログアウトの必要はなし</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="na">getIdentity</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span>
        <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">({</span>
            <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">fullName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John Doe</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}),</span>
    <span class="na">getPermissions</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">''</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">authProvider</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="ステップバイステップ">ステップバイステップ</h2>

<p>独自のauthプロバイダーを実装する必要がある場合は、以下のステップバイステップガイドを参考にしてください。</p>

<h3 id="login"><code class="language-plaintext highlighter-rouge">login</code></h3>

<p>管理者が<code class="language-plaintext highlighter-rouge">authProvider</code>を持つと、react-adminは<code class="language-plaintext highlighter-rouge">/login</code>ルートに新しいページを有効にし、ユーザー名とパスワードを要求するログインフォームを表示します。</p>

<p><img src="./img/login-form.png" alt="デフォルトのログインフォーム" /></p>

<p>送信すると、このフォームは<code class="language-plaintext highlighter-rouge">authProvider.login({ username, password })</code>メソッドを呼び出します。このメソッドは、資格情報が正しければ解決されたPromiseを返し、正しくなければ拒否されたPromiseを返すことをreact-adminは期待しています。</p>

<p>例えば、HTTPSを介して認証ルートにクエリを実行し、資格情報（トークン）をローカルストレージに保存するには、次のように<code class="language-plaintext highlighter-rouge">authProvider</code>を設定します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="kd">const</span> <span class="nx">authProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span>  <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://mydomain.com/authenticate</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}),</span>
            <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span> <span class="p">}),</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">200</span> <span class="o">||</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">300</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">auth</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">auth</span><span class="p">));</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Network error</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">});</span>
    <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// 認証が機能するために必要</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="na">getPermissions</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// 認証が機能するために必要</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">authProvider</span><span class="p">;</span>
</code></pre></div></div>

<p>Promiseが解決されると、ログインフォームは前のページにリダイレクトされるか、ユーザーが到着した場合は管理インデックスにリダイレクトされます。</p>

<p><strong>Tip</strong>: この例のように資格情報を<code class="language-plaintext highlighter-rouge">localStorage</code>に保存するのは良いアイデアです。これにより、新しいブラウザタブを開くときに再接続する必要がなくなります。ただし、これによりアプリケーションが<a href="https://www.redotheweb.com/2015/11/09/api-security.html">XSS攻撃に対して脆弱</a>になるため、セキュリティを強化し、サーバー側で<code class="language-plaintext highlighter-rouge">httpOnly</code>クッキーも追加する方が良いでしょう。</p>

<p>ログイン後、react-adminはユーザーを<code class="language-plaintext highlighter-rouge">authProvider.login()</code>によって返される場所にリダイレクトします - またはメソッドが何も返さない場合は前のページにリダイレクトします。ログイン後のリダイレクトURLをカスタマイズするには、<code class="language-plaintext highlighter-rouge">redirectTo</code>キーを含むオブジェクトを返し、文字列またはログイン後のリダイレクトを無効にするにはfalseを返します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="kd">const</span> <span class="nx">authProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span>  <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://mydomain.com/authenticate</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}),</span>
            <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span> <span class="p">}),</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="c1">// ...</span>
                <span class="k">return</span> <span class="p">{</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Network error</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">});</span>
    <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">getPermissions</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>

</code></pre></div></div>

<p>ログインが失敗した場合、<code class="language-plaintext highlighter-rouge">authProvider.login()</code>はErrorオブジェクトを持つ拒否されたPromiseを返すべきです。react-adminはエラーメッセージを通知でユーザーに表示します。</p>

<h3 id="checkerror"><code class="language-plaintext highlighter-rouge">checkError</code></h3>

<p>ユーザーの資格情報が欠落しているか無効になった場合、安全なAPIは通常、HTTPエラーコード401または403で<code class="language-plaintext highlighter-rouge">dataProvider</code>に応答します。</p>

<p>幸いなことに、<code class="language-plaintext highlighter-rouge">dataProvider</code>または<code class="language-plaintext highlighter-rouge">authProvider.getPermissions</code>がエラーを返すたびに、react-adminは<code class="language-plaintext highlighter-rouge">authProvider.checkError()</code>メソッドを呼び出します。これが拒否されたPromiseを返すと、react-adminは直ちに<code class="language-plaintext highlighter-rouge">authProvider.logout()</code>メソッドを呼び出し、ユーザーに再ログインを要求します。</p>

<p>したがって、どのHTTPステータスコードがユーザーを続行させるべきか（Promiseを解決することによって）またはログアウトさせるべきか（Promiseを拒否することによって）を決定するのはあなた次第です。</p>

<p>例えば、401および403の両方のコードでユーザーをログアウトさせるには、次のようにします。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">401</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">403</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">// 他のエラーコード（404, 500など）：ログアウトの必要はなし</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">authProvider.checkError()</code>が拒否されたPromiseを返すと、react-adminは<code class="language-plaintext highlighter-rouge">/login</code>ページまたは<code class="language-plaintext highlighter-rouge">error.redirectTo</code> URLにリダイレクトします。これにより、デフォルトのリダイレクトを次のように上書きできます。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">401</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">403</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/credentials-required</span><span class="dl">'</span> <span class="p">});</span>
        <span class="p">}</span>
        <span class="c1">// 他のエラーコード（404, 500など）：ログアウトの必要はなし</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<p>ユーザーをログアウトさせずにリダイレクトすることも可能です。これには、<code class="language-plaintext highlighter-rouge">Promise.reject</code>に<code class="language-plaintext highlighter-rouge">error.redirectTo</code> URLとともに<code class="language-plaintext highlighter-rouge">error.logoutUser = false</code>を渡します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">401</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">403</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/unauthorized</span><span class="dl">'</span><span class="p">,</span> <span class="na">logoutUser</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
        <span class="p">}</span>
        <span class="c1">// 他のエラーコード（404, 500など）：ログアウトの必要はなし</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">authProvider.checkError()</code>が拒否されたPromiseを返すと、react-adminはエンドユーザーに通知を表示します。ただし、<code class="language-plaintext highlighter-rouge">error.message</code>が<code class="language-plaintext highlighter-rouge">false</code>の場合は表示しません。これにより、次のようにエラー時の通知を無効化またはカスタマイズできます。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">401</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">403</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
            <span class="c1">// return Promise.reject({ message: 'Unauthorized user!' });</span>
        <span class="p">}</span>
        <span class="c1">// 他のエラーコード（404, 500など）：ログアウトの必要はなし</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="checkauth"><code class="language-plaintext highlighter-rouge">checkAuth</code></h3>

<p>RESTレスポンスが401ステータスコードを使用するたびにログインページにリダイレクトするだけでは通常十分ではありません。react-adminはクライアント側でデータを保持し、サーバーと連絡を取る際に資格情報が無効になっても古いデータを一時的に表示することがあります。</p>

<p>幸いなことに、ユーザーがリスト、編集、作成、または表示ページに移動するたびに、react-adminは<code class="language-plaintext highlighter-rouge">authProvider.checkAuth()</code>メソッドを呼び出します。このメソッドが拒否されたPromiseを返すと、react-adminは<code class="language-plaintext highlighter-rouge">authProvider.logout()</code>を呼び出し、ユーザーをログインページにリダイレクトします。したがって、資格情報がまだ有効であることを確認するための理想的な場所です。</p>

<p>例えば、ローカルストレージに認証データが存在するかどうかを確認するには次のようにします。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">?</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
        <span class="p">:</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(),</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Promiseが拒否された場合、react-adminはデフォルトで<code class="language-plaintext highlighter-rouge">/login</code>ページにリダイレクトします。<code class="language-plaintext highlighter-rouge">checkAuth()</code>でユーザーのリダイレクト先を上書きするには、リダイレクト先を持つオブジェクトを拒否します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">?</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
        <span class="p">:</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/no-access</span><span class="dl">'</span> <span class="p">}),</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">authProvider.checkAuth()</code>と<code class="language-plaintext highlighter-rouge">authProvider.logout()</code>の両方がリダイレクトURLを返す場合、<code class="language-plaintext highlighter-rouge">authProvider.checkAuth()</code>のリダイレクト先が優先されます。</p>

<p>Promiseが拒否された場合、react-adminはエンドユーザーに通知を表示します。このメッセージをカスタマイズするには、<code class="language-plaintext highlighter-rouge">message</code>プロパティを持つエラーを拒否します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">?</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
        <span class="p">:</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">login.required</span><span class="dl">'</span> <span class="p">}),</span> <span class="c1">// react-adminはエラーメッセージを翻訳レイヤーに渡します</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>この通知を完全に無効にすることも可能です。そのためには、<code class="language-plaintext highlighter-rouge">message</code>プロパティに<code class="language-plaintext highlighter-rouge">false</code>を持つエラーを拒否します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">?</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
        <span class="p">:</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}),</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="logout"><code class="language-plaintext highlighter-rouge">logout</code></h3>

<p>認証を有効にすると、react-adminはトップバーのユーザーメニュー（またはモバイルではスライドメニュー）にログアウトボタンを追加します。ユーザーがログアウトボタンをクリックすると、<code class="language-plaintext highlighter-rouge">authProvider.logout()</code>メソッドが呼び出され、<a href="./Store.md">react-admin Store</a>に保存されている可能性のある機密データが削除されます。その後、ユーザーはログインページにリダイレクトされます。前の2つのセクションでも示したように、react-adminはAPIが403エラーを返したときやローカルの資格情報が期限切れになったときに<code class="language-plaintext highlighter-rouge">authProvider.logout()</code>を呼び出すことがあります。</p>

<p><code class="language-plaintext highlighter-rouge">authProvider.logout()</code>メソッドは、現在の認証データをクリーンアップする責任を負います。例えば、認証がローカルストレージに保存されているトークンであった場合、これを削除するコードは次のとおりです。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">logout</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>
<video controls="" autoplay="" playsinline="" muted="" loop=""> <source src="./img/logout.webm" type="video/webm" /> <source src="./img/logout.mp4" type="video/mp4" /> お使いのブラウザはvideoタグをサポートしていません。 </video>

<p><code class="language-plaintext highlighter-rouge">authProvider.logout()</code>メソッドは、ログアウト後に認証バックエンドにユーザー資格情報が無効になったことを通知するための良い場所でもあります。</p>

<p>ログアウト後、react-adminは<code class="language-plaintext highlighter-rouge">authProvider.logout()</code>によって返される文字列にユーザーをリダイレクトします - またはメソッドが何も返さない場合は<code class="language-plaintext highlighter-rouge">/login</code> URLにリダイレクトします。ログアウト後のリダイレクトURLをカスタマイズするには、ルート文字列を返すか、ログアウト後のリダイレクトを無効にするには<code class="language-plaintext highlighter-rouge">false</code>を返します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">logout</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">/my-custom-login</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="getidentity"><code class="language-plaintext highlighter-rouge">getIdentity</code></h3>

<p>react-adminは画面右上に現在のユーザー名とアバターを表示できます。この機能を有効にするには、<code class="language-plaintext highlighter-rouge">authProvider.getIdentity()</code>メソッドを実装します。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/authProvider.js</span>
<span class="kd">const</span> <span class="nx">authProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">({</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkError</span><span class="p">:</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">checkAuth</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">logout</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">},</span>
    <span class="na">getIdentity</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">fullName</span><span class="p">,</span> <span class="nx">avatar</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth</span><span class="dl">'</span><span class="p">));</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">({</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">fullName</span><span class="p">,</span> <span class="nx">avatar</span> <span class="p">});</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">authProvider</span><span class="p">;</span>
</code></pre></div></div>

<p>react-adminは、App Barで<code class="language-plaintext highlighter-rouge">fullName</code>と<code class="language-plaintext highlighter-rouge">avatar</code>（画像ソースまたはdata-uri）を使用します。</p>

<p><img src="./img/identity.png" alt="ユーザーのアイデンティティ" /></p>

<p><strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">useGetIdentity</code>フックを呼び出すことで、コード内で現在のユーザーを識別するために<code class="language-plaintext highlighter-rouge">id</code>フィールドを使用できます。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useGetIdentity</span><span class="p">,</span> <span class="nx">useGetOne</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostDetail</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">id</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">post</span><span class="p">,</span> <span class="na">isLoading</span><span class="p">:</span> <span class="nx">postLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">});</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="na">isLoading</span><span class="p">:</span> <span class="nx">identityLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetIdentity</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">postLoading</span> <span class="o">||</span> <span class="nx">identityLoading</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;&gt;</span>Loading...<span class="p">&lt;/&gt;;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">post</span><span class="p">.</span><span class="nx">lockedBy</span> <span class="o">||</span> <span class="nx">post</span><span class="p">.</span><span class="nx">lockedBy</span> <span class="o">===</span> <span class="nx">identity</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ポストはロックされていないか、自分によってロックされている</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nc">PostEdit</span> <span class="na">post</span><span class="p">=</span><span class="si">{</span><span class="nx">post</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// ポストは他の誰かによってロックされており、編集できない</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nc">PostShow</span> <span class="na">post</span><span class="p">=</span><span class="si">{</span><span class="nx">post</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="getpermissions"><code class="language-plaintext highlighter-rouge">getPermissions</code></h3>

<p>このメソッドはユーザーの権限を返すべきです。形式は任意で構いません - 単純な文字列（例：<code class="language-plaintext highlighter-rouge">'editor'</code>）、文字列の配列（例：<code class="language-plaintext highlighter-rouge">['editor', 'admin']</code>）、または複雑なオブジェクト（例：<code class="language-plaintext highlighter-rouge">{ posts: 'editor', comments: 'moderator', users: 'admin' }</code>）。</p>

<p>react-adminはデフォルトでは権限を使用しませんが、現在のユーザーの権限を取得するための <a href="./usePermissions.md"><code class="language-plaintext highlighter-rouge">usePermissions</code>フック</a>を提供します。これにより、コンポーネント内にニーズに合った権限ロジックを追加できます。</p>

<p><a href="./AuthRBAC.md">役割ベースのアクセス制御（RBAC）モジュール</a>は、react-adminアプリで詳細な権限を可能にし、<code class="language-plaintext highlighter-rouge">authProvider.getPermissions()</code>のカスタムリターン形式を指定します。詳細については<a href="./AuthRBAC.md#authprovider-methods">RBACドキュメント</a>を参照してください。</p>

<h3 id="handlecallback"><code class="language-plaintext highlighter-rouge">handleCallback</code></h3>

<p>このメソッドは、<a href="https://auth0.com/">Auth0</a>などのサードパーティの認証プロバイダーを統合する際に使用されます。react-adminは認証サービスのコールバックURLとして使用される<code class="language-plaintext highlighter-rouge">/auth-callback</code>パスにルートを提供します。認証サービスを使用してログインした後、ユーザーはこのルートにリダイレクトされます。<code class="language-plaintext highlighter-rouge">/auth-callback</code>ルートはマウント時に<code class="language-plaintext highlighter-rouge">authProvider.handleCallback</code>メソッドを呼び出します。</p>

<p>したがって、<code class="language-plaintext highlighter-rouge">handleCallback</code>はサードパーティの認証サービスによって渡されたクエリパラメータを処理し、例として認証トークンを取得します。</p>

<p>ここでは、Auth0を使用した例を示します。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">PreviousLocationStorageKey</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Auth0Client</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Auth0Client</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">authProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">async</span> <span class="nx">login</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ここでは何もする必要はありません。この関数は呼び出されることはありません */</span> <span class="p">},</span>
    <span class="k">async</span> <span class="nx">checkAuth</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">isAuthenticated</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isAuthenticated</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// 認証されていない：ユーザーがアクセスしようとした場所を保存</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">PreviousLocationStorageKey</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">);</span>
        <span class="c1">// その後、ユーザーをAuth0サービスにリダイレクト</span>
        <span class="nx">client</span><span class="p">.</span><span class="nx">loginWithRedirect</span><span class="p">({</span>
            <span class="na">authorizationParams</span><span class="p">:</span> <span class="p">{</span>
                <span class="c1">// ログイン後、Auth0はユーザーをこのページにリダイレクトします</span>
                <span class="na">redirect_uri</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">origin</span><span class="p">}</span><span class="s2">/auth-callback`</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">});</span>
    <span class="p">},</span>
    <span class="c1">// ユーザーがAuth0サービスで正常にログインし、</span>
    <span class="c1">// アプリの/auth-callbackルートにリダイレクトされた</span>
    <span class="k">async</span> <span class="nx">handleCallback</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">query</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">code=</span><span class="dl">'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">query</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">state=</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">ログインコールバックの処理に失敗しました。</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// Auth0パラメータを受け取った場合、</span>
        <span class="c1">// クエリパラメータに基づいてアクセストークンを取得</span>
        <span class="k">await</span> <span class="nx">Auth0Client</span><span class="p">.</span><span class="nx">handleRedirectCallback</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">handleCallback</code>が解決されたPromiseを返すと、react-adminはユーザーをホームページまたは<code class="language-plaintext highlighter-rouge">localStorage.getItem(PreviousLocationStorageKey)</code>に格納されている場所にリダイレクトします。上記の例では、<code class="language-plaintext highlighter-rouge">authProvider.checkAuth()</code>がユーザーがアクセスしようとしていたページをこの場所に設定します。</p>

<p>この動作を上書きするには、<code class="language-plaintext highlighter-rouge">redirectTo</code>プロパティを持つオブジェクトを返します。</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="nx">handleCallback</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">query</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">code=</span><span class="dl">'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">query</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">state=</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">ログインコールバックの処理に失敗しました。</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// Auth0パラメータを受け取った場合、</span>
    <span class="c1">// クエリパラメータに基づいてアクセストークンを取得</span>
    <span class="k">await</span> <span class="nx">Auth0Client</span><span class="p">.</span><span class="nx">handleRedirectCallback</span><span class="p">();</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/posts</span><span class="dl">'</span> <span class="p">};</span>
<span class="p">},</span>
</code></pre></div></div>

<h2 id="リクエスト形式">リクエスト形式</h2>

<p>react-adminは以下のパラメータで<code class="language-plaintext highlighter-rouge">authProvider</code>メソッドを呼び出します：</p>

<table>
  <thead>
    <tr>
      <th>メソッド</th>
      <th>使用例</th>
      <th>パラメータ形式</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">login</code></td>
      <td>ユーザーのログイン</td>
      <td><code class="language-plaintext highlighter-rouge">Object</code> ログインフォームに含まれる任意のフィールド</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">checkError</code></td>
      <td><code class="language-plaintext highlighter-rouge">dataProvider</code>エラーが認証エラーであるか確認</td>
      <td><code class="language-plaintext highlighter-rouge">{ message: string, status: number, body: Object }</code> <code class="language-plaintext highlighter-rouge">dataProvider</code>が返すエラー</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">checkAuth</code></td>
      <td>新しいルートに移動する前に資格情報を確認</td>
      <td><code class="language-plaintext highlighter-rouge">Object</code> <code class="language-plaintext highlighter-rouge">useCheckAuth()</code>に渡される任意のパラメータ - react-adminデフォルトルートの場合は空</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">logout</code></td>
      <td>ユーザーのログアウト</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getIdentity</code></td>
      <td>現在のユーザーのアイデンティティを取得</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">handleCallback</code></td>
      <td>サードパーティ認証サービスのリダイレクト後にユーザーを検証</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getPermissions</code></td>
      <td>現在のユーザーの資格情報を取得</td>
      <td><code class="language-plaintext highlighter-rouge">Object</code> <code class="language-plaintext highlighter-rouge">usePermissions()</code>に渡される任意のパラメータ - react-adminデフォルトルートの場合は空</td>
    </tr>
  </tbody>
</table>

<h2 id="レスポンス形式">レスポンス形式</h2>

<p><code class="language-plaintext highlighter-rouge">authProvider</code>メソッドはPromiseを返さなければなりません。成功の場合、Promiseは次の値を返すべきです：</p>

<p>|メソッド|解決される条件|レスポンス形式|
|—|—|—|
|<code class="language-plaintext highlighter-rouge">login</code>|ログイン資格情報が受け入れられた|`void|
|<code class="language-plaintext highlighter-rouge">checkError</code>|エラーが認証エラーでない|<code class="language-plaintext highlighter-rouge">void</code>|
|<code class="language-plaintext highlighter-rouge">checkAuth</code>|ユーザーが認証されている|<code class="language-plaintext highlighter-rouge">void</code>|
|<code class="language-plaintext highlighter-rouge">logout</code>|認証バックエンドがログアウトを確認|`string|
|<code class="language-plaintext highlighter-rouge">getIdentity</code>|認証バックエンドがアイデンティティを返した|`{ id: string|
|<code class="language-plaintext highlighter-rouge">handleCallback</code>|ユーザーが認証された|`void|
|<code class="language-plaintext highlighter-rouge">getPermissions</code>|認証バックエンドが権限を返した|`Object|</p>

<h2 id="エラー形式">エラー形式</h2>

<p>認証バックエンドがエラーを返す場合、Authプロバイダーは以下の値で拒否されたPromiseを返すべきです：</p>

<p>|メソッド|拒否される条件|エラー形式|
|—|—|—|
|<code class="language-plaintext highlighter-rouge">login</code>|ログイン資格情報が受け入れられなかった|`string|
|<code class="language-plaintext highlighter-rouge">checkError</code>|エラーが認証エラーである場合|`void|
|<code class="language-plaintext highlighter-rouge">checkAuth</code>|ユーザーが認証されていない場合|`void|
|<code class="language-plaintext highlighter-rouge">logout</code>|認証バックエンドがユーザーのログアウトに失敗|<code class="language-plaintext highlighter-rouge">void</code>|
|<code class="language-plaintext highlighter-rouge">getIdentity</code>|認証バックエンドがアイデンティティを返すのに失敗|<code class="language-plaintext highlighter-rouge">Object</code> 自由形式 - <code class="language-plaintext highlighter-rouge">useGetIdentity()</code>が呼び出されたときに<code class="language-plaintext highlighter-rouge">error</code>として返される|
|<code class="language-plaintext highlighter-rouge">handleCallback</code>|リダイレクト後にユーザーの認証に失敗|`void|
|<code class="language-plaintext highlighter-rouge">getPermissions</code>|認証バックエンドが権限を返すのに失敗|<code class="language-plaintext highlighter-rouge">Object</code> 自由形式 - <code class="language-plaintext highlighter-rouge">usePermissions()</code>が呼び出されたときに<code class="language-plaintext highlighter-rouge">error</code>として返される。エラーは<code class="language-plaintext highlighter-rouge">checkError</code>に渡される|</p>


                        </div>
                    </div>
                    <div class="col hide-on-small-only m3 toc-container">
                        <div class="toc"></div>
                    </div>
                </div>
            </div>
        </main>

        <script src="/js/materialize.min.js"></script>
        <script src="/js/prism.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.min.js"
            defer
            integrity="sha512-oD3xGN8YTxenx6tdS4D/RKqO4OtORBQtAb2/FseM17GGMIi6jMwKUBc8duX4A5RwMOGGXoFBZrsqbOk8GpXFgQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script src="/js/ra-doc-exec.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
        
        <script type="text/javascript">
            docsearch({
                container: '#docsearch',
                appId: 'QY9T9CVM2N',
                indexName: 'marmelab-react-admin',
                apiKey: '75332227370be3dc35777cee6244881a',
                searchParameters: { facetFilters: ['version:  latest'] },
            });
        </script>

        <!--
        React-admin protects your privacy!
        We use our own self-hosted tracking solution to collect some raw metrics,
        like page views, device type (mobile, desktop, etc.) or country.
        We don't track any personal information about our visitors.
    -->
        <script
            async
            defer
            data-website-id="ef7f8242-2808-4cbf-9dff-564daa515bbd"
            src="https://analytics.marmelab.com/umami.js"
        ></script>

        <!-- Newsletter form -->
        <script>
            window.REQUIRED_CODE_ERROR_MESSAGE = 'Please choose a country code';
            window.LOCALE = 'en';
            window.GENERIC_INVALID_MESSAGE = window.EMAIL_INVALID_MESSAGE = window.SMS_INVALID_MESSAGE =
                'The information provided is invalid. Please review the field format and try again.';
            window.REQUIRED_ERROR_MESSAGE = 'This field is required.';

            var AUTOHIDE = Boolean(0);
        </script>

        <script
            async
            defer
            src="https://unpkg.com/typescript@5.1.3/lib/typescript.js"
        ></script>
        <script
            async
            defer
            src="https://unpkg.com/prettier@2.8.8/standalone.js"
        ></script>
        <script
            async
            defer
            src="https://unpkg.com/prettier@2.8.8/parser-babel.js"
        ></script>
    </body>
</html>
